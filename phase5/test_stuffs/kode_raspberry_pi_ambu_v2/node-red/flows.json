[
    {
        "id": "dea9ee4a.091b4",
        "type": "tab",
        "label": "Sensor, Detection, Alarm",
        "disabled": false,
        "info": ""
    },
    {
        "id": "811eb35.554d75",
        "type": "tab",
        "label": "Actuator Motor",
        "disabled": false,
        "info": ""
    },
    {
        "id": "927d9689.f973b8",
        "type": "tab",
        "label": "Data, Variables, Misc",
        "disabled": false,
        "info": ""
    },
    {
        "id": "c234feb0.ef673",
        "type": "tab",
        "label": "Dashboard Ventilator",
        "disabled": false,
        "info": ""
    },
    {
        "id": "55d0620b.dc73dc",
        "type": "tab",
        "label": "Dummy [disabled]",
        "disabled": true,
        "info": ""
    },
    {
        "id": "9676a003.8e781",
        "type": "subflow",
        "name": "Stepper Motor",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 160,
                "y": 100,
                "wires": [
                    {
                        "id": "ba32bdc0.646c4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1044,
                "y": 79,
                "wires": [
                    {
                        "id": "e922314a.2bd91",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1041,
                "y": 137,
                "wires": [
                    {
                        "id": "e922314a.2bd91",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1042,
                "y": 189,
                "wires": [
                    {
                        "id": "e922314a.2bd91",
                        "port": 2
                    }
                ]
            },
            {
                "x": 1044,
                "y": 242,
                "wires": [
                    {
                        "id": "e922314a.2bd91",
                        "port": 3
                    }
                ]
            },
            {
                "x": 1025,
                "y": 379,
                "wires": [
                    {
                        "id": "e922314a.2bd91",
                        "port": 4
                    },
                    {
                        "id": "ced5034a.6b276",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "69374d07.adcd74",
        "type": "ui_group",
        "z": "",
        "name": "Default",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "b5a2e8fc.5101e8",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "10669cce.ccb1e3",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#000000",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 54,
                "sy": 54,
                "gx": 5,
                "gy": 5,
                "cx": 3,
                "cy": 3,
                "px": 4,
                "py": 4
            }
        }
    },
    {
        "id": "e2e18edf.9d809",
        "type": "serial-port",
        "z": "",
        "serialport": "",
        "serialbaud": "115200",
        "databits": "8",
        "parity": "none",
        "stopbits": "1",
        "waitfor": "",
        "dtr": "none",
        "rts": "none",
        "cts": "none",
        "dsr": "none",
        "newline": "\\n",
        "bin": "false",
        "out": "char",
        "addchar": "",
        "responsetimeout": "10000"
    },
    {
        "id": "85fb4f9c.e9739",
        "type": "serial-port",
        "z": "",
        "serialport": "/dev/ttyUSB0",
        "serialbaud": "115200",
        "databits": "8",
        "parity": "none",
        "stopbits": "1",
        "waitfor": "",
        "dtr": "none",
        "rts": "none",
        "cts": "none",
        "dsr": "none",
        "newline": "\\n",
        "bin": "false",
        "out": "char",
        "addchar": "\\n",
        "responsetimeout": "1000"
    },
    {
        "id": "25a911f6.fdd9be",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 4,
        "width": "9",
        "height": "2"
    },
    {
        "id": "211de2c0.cd5b0e",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "566cb6a6.5a22b8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 4,
        "width": "9",
        "height": "2"
    },
    {
        "id": "69d6c2f.735763c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "84c5aeb7.aec73",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "2bee2f54.416b5",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "550567f5.085da8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "bf39b783.e646c8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "180f73e5.4f9dcc",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "464211c3.a2ca6",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "b09a5bdd.fd9338",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "71a7bd0f.8d70e4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": "5",
        "height": 1
    },
    {
        "id": "4899bf13.ffd8c",
        "type": "ui_tab",
        "z": "",
        "name": "Ventilator Use Mode",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "1a16f847.37b6a8",
        "type": "ui_group",
        "z": "",
        "name": "Choose Use Option",
        "tab": "4899bf13.ffd8c",
        "order": 2,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "93a0ab82.cbea78",
        "type": "ui_tab",
        "z": "",
        "name": "Input Setting Value",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "7186aff0.efeae",
        "type": "ui_group",
        "z": "",
        "name": "Setting",
        "tab": "93a0ab82.cbea78",
        "order": 2,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "a1d34288.489cb",
        "type": "ui_group",
        "z": "",
        "name": "Alarm",
        "tab": "4899bf13.ffd8c",
        "order": 5,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "7d9abf5c.20d99",
        "type": "ui_group",
        "z": "",
        "name": "Navigation",
        "tab": "4899bf13.ffd8c",
        "order": 3,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "cb63702e.8a642",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "1a16f847.37b6a8",
        "order": 4,
        "width": "9",
        "height": "2"
    },
    {
        "id": "2148ed30.41a932",
        "type": "ui_group",
        "z": "",
        "name": "Alarm",
        "tab": "93a0ab82.cbea78",
        "order": 5,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "ca2fe840.3dd0c8",
        "type": "ui_tab",
        "z": "",
        "name": "Input Alarm Threshold",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "7775cf38.ae09d",
        "type": "ui_group",
        "z": "",
        "name": "Setting",
        "tab": "ca2fe840.3dd0c8",
        "order": 2,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "7651cd96.a116e4",
        "type": "ui_group",
        "z": "",
        "name": "Alarm",
        "tab": "ca2fe840.3dd0c8",
        "order": 5,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "382bb872.e748e8",
        "type": "ui_tab",
        "z": "",
        "name": "Ventilator Monitoring",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "410c9e1f.ac8cf",
        "type": "ui_group",
        "z": "",
        "name": "Pressure Chart",
        "tab": "382bb872.e748e8",
        "order": 2,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "45ff047a.6a3e1c",
        "type": "ui_group",
        "z": "",
        "name": "Alarm",
        "tab": "382bb872.e748e8",
        "order": 5,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "96f6a924.736ba8",
        "type": "ui_group",
        "z": "",
        "name": "Navigation",
        "tab": "93a0ab82.cbea78",
        "order": 3,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "7d3e815c.f14cc",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "96f6a924.736ba8",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "1a8ad9e3.6a7de6",
        "type": "ui_group",
        "z": "",
        "name": "Navigation",
        "tab": "ca2fe840.3dd0c8",
        "order": 3,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "e7b72900.1ecd98",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "7775cf38.ae09d",
        "order": 4,
        "width": "9",
        "height": "2"
    },
    {
        "id": "fb38bc0c.0f2bd",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "1a8ad9e3.6a7de6",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "d2caa19c.b7ab3",
        "type": "ui_group",
        "z": "",
        "name": "Title",
        "tab": "93a0ab82.cbea78",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "68704283.9c276c",
        "type": "ui_group",
        "z": "",
        "name": "Title",
        "tab": "ca2fe840.3dd0c8",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "3c8c110d.30d28e",
        "type": "ui_group",
        "z": "",
        "name": "Title",
        "tab": "382bb872.e748e8",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "308ee0c9.b4a38",
        "type": "ui_group",
        "z": "",
        "name": "Navigation",
        "tab": "382bb872.e748e8",
        "order": 3,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "ef7b6fc7.03b4a",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "3fc97fc1.39749",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "308ee0c9.b4a38",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "8c2984b9.abd048",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "1a16f847.37b6a8",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "1cde5b5f.611585",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "7d9abf5c.20d99",
        "order": 1,
        "width": "5",
        "height": 1
    },
    {
        "id": "108cbf01.e5c471",
        "type": "ui_group",
        "z": "",
        "name": "Title",
        "tab": "4899bf13.ffd8c",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "913f80b.7920f8",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "f95f37c1.8798c8",
        "type": "ui_group",
        "z": "",
        "name": "Group 5",
        "tab": "4899bf13.ffd8c",
        "order": 4,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "3ba9c398.8f3ebc",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "f95f37c1.8798c8",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "3649adea.4827e2",
        "type": "ui_group",
        "z": "",
        "name": "Group 5",
        "tab": "93a0ab82.cbea78",
        "order": 4,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "b780f175.09b2f",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "3649adea.4827e2",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "b864b673.a2ef88",
        "type": "ui_group",
        "z": "",
        "name": "Group 5",
        "tab": "ca2fe840.3dd0c8",
        "order": 4,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "9948532d.bedf9",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "b864b673.a2ef88",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "c9263dd0.4c6a3",
        "type": "ui_group",
        "z": "",
        "name": "Group 5",
        "tab": "382bb872.e748e8",
        "order": 4,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "11f6a484.1fce4b",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "c9263dd0.4c6a3",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "c98a4422.ebd7e8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "410c9e1f.ac8cf",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "cbcbbc27.a2955",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "410c9e1f.ac8cf",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "a27e7919.2f3458",
        "type": "influxdb",
        "z": "",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "ventilator2",
        "name": "",
        "usetls": false,
        "tls": ""
    },
    {
        "id": "ced5034a.6b276",
        "type": "function",
        "z": "9676a003.8e781",
        "name": "Toggle Direction",
        "func": "var direction = flow.get('direction')||0;\n\nif (direction === -1)\n{\n    direction = 1;\n}\nelse {\n    direction = -1;\n}\nflow.set('direction',direction);\nmsg.payload = direction;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 431,
        "y": 267,
        "wires": [
            []
        ]
    },
    {
        "id": "ba32bdc0.646c4",
        "type": "switch",
        "z": "9676a003.8e781",
        "name": "Step or Direction",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Step",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Direction",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 291,
        "y": 171,
        "wires": [
            [
                "ff55bbc0.db4e98"
            ],
            [
                "ced5034a.6b276"
            ]
        ]
    },
    {
        "id": "f61ad706.048cc8",
        "type": "comment",
        "z": "9676a003.8e781",
        "name": "Flow Variables",
        "info": "* Direction\n* Sequence\n* SequenceIndex",
        "x": 279,
        "y": 42,
        "wires": []
    },
    {
        "id": "e922314a.2bd91",
        "type": "function",
        "z": "9676a003.8e781",
        "name": "Sequence Generator",
        "func": "var seqindex = context.get('seqindex')||0;\nvar sequence = [ [1,0,0,0],[1,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,1,1],[0,0,0,1],[1,0,0,1]]\nvar direction = flow.get('direction');\n\nseqindex = (seqindex % (sequence.length));\nif (seqindex == -1) {seqindex = sequence.length-1;}\n\nmsg.payload = sequence[seqindex];\nmsg.seqindex = seqindex;\nmsg.direction = direction;\n\ncontext.set('seqindex',seqindex+direction);\n\nnode.status({fill:\"green\",shape:\"dot\",text:\"Step\"});\nnode.status({});\n\nreturn GenerateOutput(seqindex);\n\nfunction GenerateOutput(index) {\n    return [ NewMessage(sequence[index][0]), NewMessage(sequence[index][1]),NewMessage(sequence[index][2]),NewMessage(sequence[index][3]), msg  ];\n}\n\nfunction NewMessage(val) {\n    return { payload:val };\n}",
        "outputs": "5",
        "noerr": 0,
        "x": 720,
        "y": 174,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "ff55bbc0.db4e98",
        "type": "function",
        "z": "9676a003.8e781",
        "name": "Multistep",
        "func": "var outputMsgs = [];\nvar steps = msg.payload;\nfor (var count = 0; count < steps; count++) { \n    outputMsgs.push({payload:1});\n}\nreturn [ outputMsgs ];",
        "outputs": 1,
        "noerr": 0,
        "x": 434,
        "y": 90,
        "wires": [
            [
                "71c57acf.f43104"
            ]
        ]
    },
    {
        "id": "71c57acf.f43104",
        "type": "delay",
        "z": "9676a003.8e781",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "2",
        "nbRateUnits": "",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 615,
        "y": 76,
        "wires": [
            [
                "e922314a.2bd91"
            ]
        ]
    },
    {
        "id": "ca5f1689.d4c288",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Sensor Flow ---------------------------------------------------------",
        "info": "Check for:\n1. Spurious Breath\n2. Volume Over",
        "x": 220,
        "y": 260,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "e8d6d6a6.b0f758",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "calcBit2Flow",
        "func": "var flow_raw = parseFloat(msg.payload); // in 16 bit\nflow_raw = flow_raw * 6.144 / 32768; // in volt\n\nvar flow_val = Math.sqrt(flow_raw);\n\n// offset + gain adjust\nflow_val = (25.188 * flow_val) + 2915.7;\n\nmsg.topic = \"flow_val\";\nmsg.payload = flow_val;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 205,
        "y": 300,
        "wires": [
            [
                "c0b72a1b.1be3b8"
            ]
        ]
    },
    {
        "id": "3d8ce83e.cce5e8",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "Page 1",
        "info": "- Choose between mandatory volume control and assisted volume control\n- Display Alarm\n- Apply page lead to Input setting value",
        "x": 50,
        "y": 1440,
        "wires": []
    },
    {
        "id": "289a19fc.580166",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "1a16f847.37b6a8",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Mandatory Volume Control",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Mandatory Volume Control",
        "payloadType": "str",
        "topic": "",
        "x": 560,
        "y": 1580,
        "wires": [
            [
                "c322688c.e89198",
                "4ce4d8d5.7ac268",
                "2fbac5a6.5764ca"
            ]
        ]
    },
    {
        "id": "e5ba5de1.7392e",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "1a16f847.37b6a8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Assisted Volume Control",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Assisted Volume Control",
        "payloadType": "str",
        "topic": "",
        "x": 550,
        "y": 1620,
        "wires": [
            [
                "c322688c.e89198",
                "4ce4d8d5.7ac268",
                "4116245a.4a3cbc"
            ]
        ]
    },
    {
        "id": "8c4cee83.4d4b7",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 1,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "High Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "6c4ede0c.04648",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "red",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 660,
        "wires": [
            [
                "8c4cee83.4d4b7",
                "b86977f5.49a448",
                "1893473.6101cb9",
                "1402675c.b0ede9"
            ]
        ]
    },
    {
        "id": "33be127e.d8eece",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 700,
        "wires": [
            [
                "8c4cee83.4d4b7",
                "b86977f5.49a448",
                "1893473.6101cb9",
                "1402675c.b0ede9"
            ]
        ]
    },
    {
        "id": "656162ea.b0c2fc",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 660,
        "wires": [
            [
                "6c4ede0c.04648",
                "9352bfa7.258fe"
            ],
            [
                "33be127e.d8eece"
            ]
        ]
    },
    {
        "id": "f70dcb43.ae1378",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "7de673df.97407c",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "red",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 860,
        "wires": [
            [
                "f70dcb43.ae1378",
                "61e1d2e9.73342c",
                "35755081.f84a6",
                "f8ed9d58.f97d4"
            ]
        ]
    },
    {
        "id": "64c28ddc.ee1dc4",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 900,
        "wires": [
            [
                "f70dcb43.ae1378",
                "61e1d2e9.73342c",
                "35755081.f84a6",
                "f8ed9d58.f97d4"
            ]
        ]
    },
    {
        "id": "2a9aa268.52072e",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 860,
        "wires": [
            [
                "7de673df.97407c",
                "6a7965d9.13aeac"
            ],
            [
                "64c28ddc.ee1dc4"
            ]
        ]
    },
    {
        "id": "f5f6db77.67b0f8",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Fighting",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 760,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "cd9c6826.136108",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "red",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1040,
        "wires": [
            [
                "f5f6db77.67b0f8",
                "ad2bf8c1.b97bd8",
                "7582ac.67266d54",
                "4c0e73c3.54af8c"
            ]
        ]
    },
    {
        "id": "2bfc1a28.016ec6",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1080,
        "wires": [
            [
                "f5f6db77.67b0f8",
                "ad2bf8c1.b97bd8",
                "7582ac.67266d54",
                "4c0e73c3.54af8c"
            ]
        ]
    },
    {
        "id": "38c187be.0a4b78",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 1040,
        "wires": [
            [
                "cd9c6826.136108",
                "b2bd6044.8d6ed"
            ],
            [
                "2bfc1a28.016ec6"
            ]
        ]
    },
    {
        "id": "c44b15af.28b828",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Emergency",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "fc5a5001.a51e7",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "red",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1240,
        "wires": [
            [
                "c44b15af.28b828",
                "48bf5a0a.405b34",
                "721072ed.d0a25c",
                "28064426.2adccc"
            ]
        ]
    },
    {
        "id": "bbd4868.4c66a78",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1280,
        "wires": [
            [
                "c44b15af.28b828",
                "48bf5a0a.405b34",
                "721072ed.d0a25c",
                "28064426.2adccc"
            ]
        ]
    },
    {
        "id": "825b82eb.f7677",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 1240,
        "wires": [
            [
                "fc5a5001.a51e7",
                "3aa2d417.f1bdfc"
            ],
            [
                "bbd4868.4c66a78"
            ]
        ]
    },
    {
        "id": "3714d97e.ad9966",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 6,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Sporious",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "880e37c.97439c8",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "orange",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 660,
        "wires": [
            [
                "3714d97e.ad9966",
                "ac62c9ed.3d4178",
                "3df2c173.ee2a7e",
                "fac452d6.ad60c"
            ]
        ]
    },
    {
        "id": "94967f56.701eb",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 700,
        "wires": [
            [
                "3714d97e.ad9966",
                "ac62c9ed.3d4178",
                "3df2c173.ee2a7e",
                "fac452d6.ad60c"
            ]
        ]
    },
    {
        "id": "7de5a5c4.6909dc",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 660,
        "wires": [
            [
                "880e37c.97439c8"
            ],
            [
                "94967f56.701eb"
            ]
        ]
    },
    {
        "id": "6950bb00.dcd9a4",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Over Vol",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "f346c1cf.f463d",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "orange",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 860,
        "wires": [
            [
                "6950bb00.dcd9a4",
                "f533e664.14f8d8",
                "207ed65f.f24b7a",
                "e89b167b.c3feb8"
            ]
        ]
    },
    {
        "id": "486d91a5.aedf2",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 900,
        "wires": [
            [
                "6950bb00.dcd9a4",
                "f533e664.14f8d8",
                "207ed65f.f24b7a",
                "e89b167b.c3feb8"
            ]
        ]
    },
    {
        "id": "4e8eb7eb.fce548",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 860,
        "wires": [
            [
                "f346c1cf.f463d"
            ],
            [
                "486d91a5.aedf2"
            ]
        ]
    },
    {
        "id": "729c24e9.8b675c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low PEEP",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "d27337dc.f10258",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "orange",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 1040,
        "wires": [
            [
                "729c24e9.8b675c",
                "f2bfb474.c16078",
                "8afb0d22.3448f",
                "b215c394.f077c"
            ]
        ]
    },
    {
        "id": "1510344.7b2f5cc",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 1080,
        "wires": [
            [
                "729c24e9.8b675c",
                "f2bfb474.c16078",
                "8afb0d22.3448f",
                "b215c394.f077c"
            ]
        ]
    },
    {
        "id": "c7a4c429.458d78",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 1040,
        "wires": [
            [
                "d27337dc.f10258"
            ],
            [
                "1510344.7b2f5cc"
            ]
        ]
    },
    {
        "id": "34482de6.46cb52",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low/High O2",
        "tooltip": "",
        "color": "{{textcolour}}",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "a257c8a3.d45958",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "yellow",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "textcolour",
                "pt": "msg",
                "to": "black",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 1240,
        "wires": [
            [
                "34482de6.46cb52",
                "c860f5e1.53ed18",
                "d9c16b47.8eff08",
                "d7f3286c.5ef168"
            ]
        ]
    },
    {
        "id": "ad56de76.e5894",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "textcolour",
                "pt": "msg",
                "to": "white",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 1280,
        "wires": [
            [
                "34482de6.46cb52",
                "c860f5e1.53ed18",
                "d9c16b47.8eff08",
                "d7f3286c.5ef168"
            ]
        ]
    },
    {
        "id": "d19c3dbd.68bd4",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 1240,
        "wires": [
            [
                "a257c8a3.d45958"
            ],
            [
                "ad56de76.e5894"
            ]
        ]
    },
    {
        "id": "5409e052.3271b",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "silence bt",
        "group": "a1d34288.489cb",
        "order": 8,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "{{labelsilence}}",
        "tooltip": "",
        "color": "{{textcoloursilence}}",
        "bgcolor": "{{coloursilence}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 880,
        "y": 460,
        "wires": [
            [
                "df265240.6b18b"
            ]
        ]
    },
    {
        "id": "f31f7eed.22a43",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "a1d34288.489cb",
        "order": 3,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "RESET",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 220,
        "y": 460,
        "wires": [
            [
                "44282871.69d8d8"
            ]
        ]
    },
    {
        "id": "a0a33c0f.cb3ec",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "Page Alarm",
        "info": "Display Alarm \nbutton will change colour if alarm detected\n",
        "x": 70,
        "y": 380,
        "wires": []
    },
    {
        "id": "f8095957.725b28",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7d9abf5c.20d99",
        "order": 2,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "Apply",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Input Setting Value",
        "payloadType": "str",
        "topic": "",
        "x": 1050,
        "y": 1700,
        "wires": [
            [
                "930e6d97.b53ad",
                "1ac2ca74.3a7036",
                "d677cad9.baabe8"
            ]
        ]
    },
    {
        "id": "930e6d97.b53ad",
        "type": "ui_ui_control",
        "z": "c234feb0.ef673",
        "name": "",
        "events": "all",
        "x": 1200,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "9e5083eb.10b49",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "I:E (ratio) ",
        "tooltip": "",
        "group": "7186aff0.efeae",
        "order": 0,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "1 : {{value}}",
        "min": 0,
        "max": "3",
        "step": 1,
        "x": 560,
        "y": 2100,
        "wires": [
            [
                "953eaf6b.52996"
            ]
        ]
    },
    {
        "id": "fd45e3e0.38d04",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "Page 2",
        "info": "- Setting value",
        "x": 50,
        "y": 1980,
        "wires": []
    },
    {
        "id": "a2cf4b84.116528",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "RR (bpm)",
        "tooltip": "",
        "group": "7186aff0.efeae",
        "order": 0,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "10",
        "max": "60",
        "step": 1,
        "x": 560,
        "y": 2160,
        "wires": [
            [
                "f9b71d27.834f7"
            ]
        ]
    },
    {
        "id": "7a3cdc4b.f27aa4",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "FiO2 (%)",
        "tooltip": "",
        "group": "7186aff0.efeae",
        "order": 0,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "0",
        "max": "100",
        "step": 1,
        "x": 560,
        "y": 2220,
        "wires": [
            [
                "e341c51f.ad4088"
            ]
        ]
    },
    {
        "id": "c2394a35.d329e8",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "PEEP (cmH2O)",
        "tooltip": "",
        "group": "7186aff0.efeae",
        "order": 0,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "0",
        "max": "20",
        "step": 1,
        "x": 580,
        "y": 2280,
        "wires": [
            [
                "af08716c.4e3fb"
            ]
        ]
    },
    {
        "id": "80d11a72.28cf58",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "VTi (ml)",
        "tooltip": "",
        "group": "7186aff0.efeae",
        "order": 0,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "10",
        "max": "800",
        "step": "10",
        "x": 560,
        "y": 2340,
        "wires": [
            [
                "979fa7b8.14cbe8"
            ]
        ]
    },
    {
        "id": "b86977f5.49a448",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 1,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "High Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "1893473.6101cb9",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 1,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "High Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "1402675c.b0ede9",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 1,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "High Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "61e1d2e9.73342c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "35755081.f84a6",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "f8ed9d58.f97d4",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low Press",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "ad2bf8c1.b97bd8",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Fighting",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 760,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "7582ac.67266d54",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Fighting",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 760,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "4c0e73c3.54af8c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Fighting",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 760,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "48bf5a0a.405b34",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Emergency",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "721072ed.d0a25c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Emergency",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "28064426.2adccc",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Emergency",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 770,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "ac62c9ed.3d4178",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 6,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Sporious",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "3df2c173.ee2a7e",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 6,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Sporious",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "fac452d6.ad60c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 6,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Sporious",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "f533e664.14f8d8",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Over Vol",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 903,
        "wires": [
            []
        ]
    },
    {
        "id": "207ed65f.f24b7a",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Over Vol",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 946,
        "wires": [
            []
        ]
    },
    {
        "id": "e89b167b.c3feb8",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Over Vol",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1700,
        "y": 987,
        "wires": [
            []
        ]
    },
    {
        "id": "f2bfb474.c16078",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low PEEP",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "8afb0d22.3448f",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low PEEP",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "b215c394.f077c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low PEEP",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "c860f5e1.53ed18",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low/High O2",
        "tooltip": "",
        "color": "{{textcolour}}",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "d9c16b47.8eff08",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low/High O2",
        "tooltip": "",
        "color": "{{textcolour}}",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "d7f3286c.5ef168",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Low/High O2",
        "tooltip": "",
        "color": "{{textcolour}}",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1710,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "f7fc8fec.8737e",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "silence bt",
        "group": "2148ed30.41a932",
        "order": 8,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "{{labelsilence}}",
        "tooltip": "",
        "color": "{{textcoloursilence}}",
        "bgcolor": "{{coloursilence}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 880,
        "y": 500,
        "wires": [
            [
                "df265240.6b18b"
            ]
        ]
    },
    {
        "id": "75db60ac.33d2c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "silence bt",
        "group": "7651cd96.a116e4",
        "order": 8,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "{{labelsilence}}",
        "tooltip": "",
        "color": "{{textcoloursilence}}",
        "bgcolor": "{{coloursilence}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 880,
        "y": 540,
        "wires": [
            [
                "df265240.6b18b"
            ]
        ]
    },
    {
        "id": "15c91d30.c79da3",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "silence bt",
        "group": "45ff047a.6a3e1c",
        "order": 8,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "{{labelsilence}}",
        "tooltip": "",
        "color": "{{textcoloursilence}}",
        "bgcolor": "{{coloursilence}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 880,
        "y": 580,
        "wires": [
            [
                "df265240.6b18b"
            ]
        ]
    },
    {
        "id": "4941a853.5e8a08",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "2148ed30.41a932",
        "order": 3,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "RESET",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 220,
        "y": 500,
        "wires": [
            [
                "44282871.69d8d8"
            ]
        ]
    },
    {
        "id": "7eedf245.4be4dc",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "7651cd96.a116e4",
        "order": 3,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "RESET",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 220,
        "y": 540,
        "wires": [
            [
                "44282871.69d8d8"
            ]
        ]
    },
    {
        "id": "585fc4e0.8eaa3c",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "45ff047a.6a3e1c",
        "order": 3,
        "width": "3",
        "height": "2",
        "passthru": false,
        "label": "RESET",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 220,
        "y": 580,
        "wires": [
            [
                "44282871.69d8d8"
            ]
        ]
    },
    {
        "id": "339e442b.2525ac",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "96f6a924.736ba8",
        "order": 1,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "Back",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Ventilator Use Mode",
        "payloadType": "str",
        "topic": "",
        "x": 550,
        "y": 2400,
        "wires": [
            [
                "eacf1f02.32851"
            ]
        ]
    },
    {
        "id": "eacf1f02.32851",
        "type": "ui_ui_control",
        "z": "c234feb0.ef673",
        "name": "",
        "events": "all",
        "x": 720,
        "y": 2400,
        "wires": [
            []
        ]
    },
    {
        "id": "4b007125.578cc",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "96f6a924.736ba8",
        "order": 3,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "Next",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Input Alarm Threshold",
        "payloadType": "str",
        "topic": "",
        "x": 550,
        "y": 2440,
        "wires": [
            [
                "6c3566f.fdc0398",
                "eacf1f02.32851",
                "299946d3.4debca"
            ]
        ]
    },
    {
        "id": "e4c8a88a.2a6408",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "High Press Limit (cmH2O)",
        "tooltip": "",
        "group": "7775cf38.ae09d",
        "order": 1,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "5",
        "max": "60",
        "step": 1,
        "x": 390,
        "y": 2800,
        "wires": [
            [
                "5198e279.628d1c"
            ]
        ]
    },
    {
        "id": "6021754.8f3028c",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "Page 3",
        "info": "- Setting alarm treshold",
        "x": 50,
        "y": 2680,
        "wires": []
    },
    {
        "id": "da24ec72.0220a",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "Low Press Limit (cmH2O)",
        "tooltip": "",
        "group": "7775cf38.ae09d",
        "order": 2,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "0",
        "max": "10",
        "step": 1,
        "x": 390,
        "y": 2860,
        "wires": [
            [
                "924206.fb57adf8"
            ]
        ]
    },
    {
        "id": "9fd1f288.4efd1",
        "type": "ui_numeric",
        "z": "c234feb0.ef673",
        "name": "",
        "label": "O2 Tolerance (%)",
        "tooltip": "",
        "group": "7775cf38.ae09d",
        "order": 3,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": "5",
        "max": "30",
        "step": 1,
        "x": 370,
        "y": 2920,
        "wires": [
            [
                "f66bd94e.cc3788"
            ]
        ]
    },
    {
        "id": "b5590de1.a30a8",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "1a8ad9e3.6a7de6",
        "order": 1,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "Back",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Input Setting Value",
        "payloadType": "str",
        "topic": "",
        "x": 330,
        "y": 3000,
        "wires": [
            [
                "24d8de1d.7b8f42"
            ]
        ]
    },
    {
        "id": "24d8de1d.7b8f42",
        "type": "ui_ui_control",
        "z": "c234feb0.ef673",
        "name": "",
        "events": "all",
        "x": 500,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "86a4082e.c48228",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "",
        "group": "1a8ad9e3.6a7de6",
        "order": 3,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "Next",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Ventilator Monitoring",
        "payloadType": "str",
        "topic": "",
        "x": 330,
        "y": 3040,
        "wires": [
            [
                "43aeaf3f.ec01f",
                "24d8de1d.7b8f42"
            ]
        ]
    },
    {
        "id": "929d2a62.30bd68",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "Page 4",
        "info": "Main Page contain :\n- chart\n- read value\n- setting value\n- alarm",
        "x": 50,
        "y": 3160,
        "wires": []
    },
    {
        "id": "55dc2e84.7431b",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "410c9e1f.ac8cf",
        "order": 2,
        "width": "4",
        "height": "1",
        "name": "",
        "label": "PIP (cmH2O)",
        "format": "{{msg.payload | number:2}}",
        "layout": "row-spread",
        "x": 950,
        "y": 3260,
        "wires": []
    },
    {
        "id": "a17c1ccc.d97b1",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "410c9e1f.ac8cf",
        "order": 4,
        "width": "4",
        "height": "1",
        "name": "",
        "label": "IPP (cmH2O)",
        "format": "{{msg.payload | number:2}}",
        "layout": "row-spread",
        "x": 950,
        "y": 3360,
        "wires": []
    },
    {
        "id": "6d1dfb34.0e4804",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "410c9e1f.ac8cf",
        "order": 6,
        "width": "4",
        "height": "1",
        "name": "",
        "label": "PEEP (cmH2O)",
        "format": "{{msg.payload | number:2}}",
        "layout": "row-spread",
        "x": 960,
        "y": 3420,
        "wires": []
    },
    {
        "id": "4a56430d.252f6c",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "410c9e1f.ac8cf",
        "order": 8,
        "width": "4",
        "height": "1",
        "name": "",
        "label": "FiO2",
        "format": "{{msg.payload | number:2}} %",
        "layout": "row-spread",
        "x": 330,
        "y": 3500,
        "wires": []
    },
    {
        "id": "371d7021.7699e",
        "type": "ui_ui_control",
        "z": "c234feb0.ef673",
        "name": "",
        "events": "all",
        "x": 1800,
        "y": 3620,
        "wires": [
            []
        ]
    },
    {
        "id": "957ddbd0.d82ec8",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "labelback",
                "pt": "msg",
                "to": "set value",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "buttonstart",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "labelstart",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "startcolour",
                "pt": "msg",
                "to": "red",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 3660,
        "wires": [
            [
                "c57620ff.e430b",
                "53ab4803.5faa38",
                "4ab780f8.ebbc6"
            ]
        ]
    },
    {
        "id": "2fdf751c.4f407a",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "labelback",
                "pt": "msg",
                "to": "use menu",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "buttonstart",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "labelstart",
                "pt": "msg",
                "to": "start",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "startcolour",
                "pt": "msg",
                "to": "green",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 3620,
        "wires": [
            [
                "c57620ff.e430b",
                "53ab4803.5faa38",
                "4ab780f8.ebbc6"
            ]
        ]
    },
    {
        "id": "c57620ff.e430b",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "back bt",
        "group": "308ee0c9.b4a38",
        "order": 1,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "{{labelback}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1240,
        "y": 3620,
        "wires": [
            [
                "cee41848.cb8d78"
            ]
        ]
    },
    {
        "id": "cee41848.cb8d78",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "buttonstart",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 3620,
        "wires": [
            [
                "1a778d39.12aa13"
            ],
            [
                "48854686.e67248"
            ]
        ]
    },
    {
        "id": "48854686.e67248",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Ventilator Use Mode",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 3660,
        "wires": [
            [
                "371d7021.7699e"
            ]
        ]
    },
    {
        "id": "1a778d39.12aa13",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Input Setting Value",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 3620,
        "wires": [
            [
                "371d7021.7699e"
            ]
        ]
    },
    {
        "id": "53ab4803.5faa38",
        "type": "ui_button",
        "z": "c234feb0.ef673",
        "name": "start bt",
        "group": "308ee0c9.b4a38",
        "order": 3,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "{{labelstart}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{startcolour}}",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 1230,
        "y": 3660,
        "wires": [
            [
                "22c802d7.06fe1e"
            ]
        ]
    },
    {
        "id": "22c802d7.06fe1e",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "buttonstart",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 830,
        "y": 3660,
        "wires": [
            [
                "2fdf751c.4f407a",
                "581231ac.514fc"
            ],
            [
                "957ddbd0.d82ec8",
                "f9377632.a92ce8"
            ]
        ]
    },
    {
        "id": "32456087.19e07",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "display alarm and bt init",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 190,
        "y": 220,
        "wires": [
            [
                "e2843ce7.aac6d"
            ]
        ]
    },
    {
        "id": "a307b167.72af4",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm01",
        "links": [
            "e2843ce7.aac6d",
            "ff2ad660.604308"
        ],
        "x": 115,
        "y": 660,
        "wires": [
            [
                "bcf5e6f6.45c348"
            ]
        ]
    },
    {
        "id": "e2843ce7.aac6d",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to triggered",
        "links": [
            "a307b167.72af4",
            "77e3ca6d.48ea54",
            "c1498ea8.9b1b8",
            "78e0139d.1b385c",
            "e54902b9.dc3d8",
            "fa2402cf.2096",
            "367fee52.ef4362",
            "8ed1e485.860a88",
            "1eae4d4c.e18983",
            "73075f7.d92f5a",
            "e3595e82.83321"
        ],
        "x": 635,
        "y": 220,
        "wires": []
    },
    {
        "id": "77e3ca6d.48ea54",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm02",
        "links": [
            "e2843ce7.aac6d",
            "e06609c4.1c2748"
        ],
        "x": 115,
        "y": 860,
        "wires": [
            [
                "575da470.bf926c"
            ]
        ]
    },
    {
        "id": "c1498ea8.9b1b8",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm03",
        "links": [
            "e2843ce7.aac6d",
            "bbc6e2a.d5bfb2"
        ],
        "x": 115,
        "y": 1040,
        "wires": [
            [
                "26c77141.4705be"
            ]
        ]
    },
    {
        "id": "78e0139d.1b385c",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm05",
        "links": [
            "e2843ce7.aac6d",
            "d2f96026.c8a67"
        ],
        "x": 1035,
        "y": 660,
        "wires": [
            [
                "18406676.2e57fa"
            ]
        ]
    },
    {
        "id": "e54902b9.dc3d8",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm06",
        "links": [
            "e2843ce7.aac6d",
            "a0be1687.939fe8"
        ],
        "x": 1035,
        "y": 860,
        "wires": [
            [
                "32dbfa7f.9ec1a6"
            ]
        ]
    },
    {
        "id": "fa2402cf.2096",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm07",
        "links": [
            "e2843ce7.aac6d",
            "ae2863cc.6ec68"
        ],
        "x": 1035,
        "y": 1040,
        "wires": [
            [
                "dbd1f7fa.16c238"
            ]
        ]
    },
    {
        "id": "367fee52.ef4362",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm04",
        "links": [
            "e2843ce7.aac6d",
            "e8982606.9bcfd8"
        ],
        "x": 115,
        "y": 1240,
        "wires": [
            [
                "568dd4bc.491a8c"
            ]
        ]
    },
    {
        "id": "8ed1e485.860a88",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "[alarm] alarm08",
        "links": [
            "e2843ce7.aac6d",
            "6f9cacc2.a62124"
        ],
        "x": 1035,
        "y": 1240,
        "wires": [
            [
                "f5c00e39.9f2e"
            ]
        ]
    },
    {
        "id": "1eae4d4c.e18983",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from trigger",
        "links": [
            "e2843ce7.aac6d"
        ],
        "x": 795,
        "y": 3620,
        "wires": [
            [
                "2fdf751c.4f407a"
            ]
        ]
    },
    {
        "id": "7e07a1dd.7278b",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "108cbf01.e5c471",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Use Control : ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 510,
        "y": 1500,
        "wires": []
    },
    {
        "id": "824785c6.5a6aa8",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1720,
        "wires": [
            [
                "f8095957.725b28"
            ]
        ]
    },
    {
        "id": "73075f7.d92f5a",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from trigger",
        "links": [
            "e2843ce7.aac6d"
        ],
        "x": 695,
        "y": 1720,
        "wires": [
            [
                "824785c6.5a6aa8"
            ]
        ]
    },
    {
        "id": "c322688c.e89198",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1680,
        "wires": [
            [
                "f8095957.725b28"
            ]
        ]
    },
    {
        "id": "6fe5d758.7f6a48",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "one time create file config",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150,
        "y": 80,
        "wires": [
            [
                "69dd498a.cb6308"
            ]
        ]
    },
    {
        "id": "69dd498a.cb6308",
        "type": "function",
        "z": "927d9689.f973b8",
        "name": "breathing param variable creator",
        "func": "var data = {};\ndata.ie = 2;\ndata.rr = 20;\ndata.o2 = 20;\ndata.peep = 5;\ndata.vol = 600;\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 80,
        "wires": [
            [
                "11880a30.4fa7d6"
            ]
        ]
    },
    {
        "id": "11880a30.4fa7d6",
        "type": "file",
        "z": "927d9689.f973b8",
        "name": "",
        "filename": "/home/pi/ventilator/breathingparam.json",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 840,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "80adebf2.707b08",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "first initial trigger",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 120,
        "y": 200,
        "wires": [
            [
                "d2890c87.86c2c"
            ]
        ]
    },
    {
        "id": "d2890c87.86c2c",
        "type": "file in",
        "z": "927d9689.f973b8",
        "name": "load breathing param",
        "filename": "/home/pi/ventilator/breathingparam.json",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 360,
        "y": 200,
        "wires": [
            [
                "7761ca4b.12a664"
            ]
        ]
    },
    {
        "id": "7761ca4b.12a664",
        "type": "json",
        "z": "927d9689.f973b8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 550,
        "y": 200,
        "wires": [
            [
                "63ac058d.25774c",
                "e603bc22.98864"
            ]
        ]
    },
    {
        "id": "63ac058d.25774c",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "set global var",
        "rules": [
            {
                "t": "set",
                "p": "set_ie",
                "pt": "global",
                "to": "payload.ie",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "set_rr",
                "pt": "global",
                "to": "payload.rr",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "set_o2",
                "pt": "global",
                "to": "payload.o2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "set_peep",
                "pt": "global",
                "to": "payload.peep",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "set_vol",
                "pt": "global",
                "to": "payload.vol",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "mode_on_off",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 200,
        "wires": [
            [
                "5aae9ee3.3d31c"
            ]
        ]
    },
    {
        "id": "48497eb9.c12c8",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from load data",
        "links": [
            "5aae9ee3.3d31c",
            "d6152324.89a6d"
        ],
        "x": 220,
        "y": 2200,
        "wires": [
            []
        ]
    },
    {
        "id": "5aae9ee3.3d31c",
        "type": "link out",
        "z": "927d9689.f973b8",
        "name": "to dashboard",
        "links": [
            "48497eb9.c12c8"
        ],
        "x": 875,
        "y": 200,
        "wires": []
    },
    {
        "id": "20c33e65.28eb72",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from apply button breathing",
        "links": [
            "6c3566f.fdc0398"
        ],
        "x": 215,
        "y": 140,
        "wires": [
            [
                "f2aff311.922d6"
            ]
        ]
    },
    {
        "id": "f2aff311.922d6",
        "type": "function",
        "z": "927d9689.f973b8",
        "name": "save breathing param variable",
        "func": "var data = {};\ndata.ie = global.get(\"set_ie\");\ndata.rr = global.get(\"set_rr\");\ndata.o2 = global.get(\"set_o2\");\ndata.peep = global.get(\"set_peep\");\ndata.vol = global.get(\"set_vol\");\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 140,
        "wires": [
            [
                "c3eefc23.40c1b"
            ]
        ]
    },
    {
        "id": "c3eefc23.40c1b",
        "type": "file",
        "z": "927d9689.f973b8",
        "name": "",
        "filename": "/home/pi/ventilator/breathingparam.json",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 760,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "6c3566f.fdc0398",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to save data breathing",
        "links": [
            "20c33e65.28eb72"
        ],
        "x": 675,
        "y": 2440,
        "wires": []
    },
    {
        "id": "6c04cd52.e60644",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "load and save breathing parameters",
        "info": "",
        "x": 140,
        "y": 40,
        "wires": []
    },
    {
        "id": "f48e2cc.0f502d",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "load and save alarm parameters",
        "info": "",
        "x": 130,
        "y": 280,
        "wires": []
    },
    {
        "id": "404fc446.c7652c",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "one time create file config",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150,
        "y": 320,
        "wires": [
            [
                "2f6c28c1.a6e788"
            ]
        ]
    },
    {
        "id": "2f6c28c1.a6e788",
        "type": "function",
        "z": "927d9689.f973b8",
        "name": "alarm param variable creator",
        "func": "var data = {};\ndata.hiplimit = 40;\ndata.loplimit = 20;\ndata.o2tol = 5;\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460,
        "y": 320,
        "wires": [
            [
                "23d46a9a.cb8e96"
            ]
        ]
    },
    {
        "id": "23d46a9a.cb8e96",
        "type": "file",
        "z": "927d9689.f973b8",
        "name": "",
        "filename": "/home/pi/ventilator/alarmparam.json",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 820,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "e7a0551e.42d698",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "first initial trigger",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 120,
        "y": 440,
        "wires": [
            [
                "c308188f.efaa38"
            ]
        ]
    },
    {
        "id": "c308188f.efaa38",
        "type": "file in",
        "z": "927d9689.f973b8",
        "name": "load breathing param",
        "filename": "/home/pi/ventilator/alarmparam.json",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 360,
        "y": 440,
        "wires": [
            [
                "d0e903e8.b1cf3"
            ]
        ]
    },
    {
        "id": "d0e903e8.b1cf3",
        "type": "json",
        "z": "927d9689.f973b8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 550,
        "y": 440,
        "wires": [
            [
                "94d3df0e.d0c77"
            ]
        ]
    },
    {
        "id": "94d3df0e.d0c77",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "set global var",
        "rules": [
            {
                "t": "set",
                "p": "set_hiplimit",
                "pt": "global",
                "to": "payload.hiplimit",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "set_loplimit",
                "pt": "global",
                "to": "payload.loplimit",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "set_o2tol",
                "pt": "global",
                "to": "payload.o2tol",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 440,
        "wires": [
            [
                "d6152324.89a6d"
            ]
        ]
    },
    {
        "id": "d6152324.89a6d",
        "type": "link out",
        "z": "927d9689.f973b8",
        "name": "to dashboard",
        "links": [
            "48497eb9.c12c8"
        ],
        "x": 875,
        "y": 440,
        "wires": []
    },
    {
        "id": "7f5bf67b.bafa08",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from apply button alarm",
        "links": [
            "43aeaf3f.ec01f"
        ],
        "x": 215,
        "y": 380,
        "wires": [
            [
                "bdf4f029.b6eea"
            ]
        ]
    },
    {
        "id": "bdf4f029.b6eea",
        "type": "function",
        "z": "927d9689.f973b8",
        "name": "save alarm param variable",
        "func": "var data = {};\ndata.hiplimit = global.get(\"set_hiplimit\");\ndata.loplimit = global.get(\"set_loplimit\");\ndata.o2tol = global.get(\"set_o2tol\");\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 420,
        "y": 380,
        "wires": [
            [
                "61cde947.634ee8"
            ]
        ]
    },
    {
        "id": "61cde947.634ee8",
        "type": "file",
        "z": "927d9689.f973b8",
        "name": "",
        "filename": "/home/pi/ventilator/alarmparam.json",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 740,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "43aeaf3f.ec01f",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "from nextBtPg3",
        "links": [
            "2062427e.47c38e",
            "215adc3b.6468b4",
            "7f5bf67b.bafa08",
            "85dd86d.f7c4278"
        ],
        "x": 455,
        "y": 3040,
        "wires": []
    },
    {
        "id": "749842ae.81939c",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 2400,
        "wires": [
            [
                "339e442b.2525ac"
            ]
        ]
    },
    {
        "id": "57bef6c1.b842a8",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 2440,
        "wires": [
            [
                "339e442b.2525ac"
            ]
        ]
    },
    {
        "id": "61125485.08d07c",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "buttonstart",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 2400,
        "wires": [
            [
                "749842ae.81939c"
            ],
            [
                "57bef6c1.b842a8"
            ]
        ]
    },
    {
        "id": "4ab780f8.ebbc6",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "check started condition",
        "links": [
            "36c8963b.a3e66a",
            "9e5b2012.ec0c7",
            "9ab1e952.6bbb18"
        ],
        "x": 1195,
        "y": 3560,
        "wires": []
    },
    {
        "id": "36c8963b.a3e66a",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from start bt",
        "links": [
            "4ab780f8.ebbc6"
        ],
        "x": 95,
        "y": 2400,
        "wires": [
            [
                "61125485.08d07c"
            ]
        ]
    },
    {
        "id": "44282871.69d8d8",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to alarm reset",
        "links": [
            "8da2a69a.8f4038",
            "687a731e.a25b6c",
            "84849fed.43ace",
            "4a544896.d96ab8",
            "8ce7310b.f5326",
            "5601f522.0fddec",
            "b17e9f5a.a4db",
            "14fb3f9c.ea834",
            "5329bb01.48de44",
            "bc0b77ef.4e5d68",
            "559e0520.f5d26c",
            "88457fd3.10927"
        ],
        "x": 355,
        "y": 460,
        "wires": []
    },
    {
        "id": "84849fed.43ace",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 335,
        "y": 700,
        "wires": [
            [
                "33be127e.d8eece"
            ]
        ]
    },
    {
        "id": "8da2a69a.8f4038",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 335,
        "y": 900,
        "wires": [
            [
                "64c28ddc.ee1dc4"
            ]
        ]
    },
    {
        "id": "8ce7310b.f5326",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 335,
        "y": 1080,
        "wires": [
            [
                "2bfc1a28.016ec6"
            ]
        ]
    },
    {
        "id": "4a544896.d96ab8",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 335,
        "y": 1280,
        "wires": [
            [
                "bbd4868.4c66a78"
            ]
        ]
    },
    {
        "id": "5601f522.0fddec",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 1275,
        "y": 700,
        "wires": [
            [
                "94967f56.701eb"
            ]
        ]
    },
    {
        "id": "b17e9f5a.a4db",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 1275,
        "y": 900,
        "wires": [
            [
                "486d91a5.aedf2"
            ]
        ]
    },
    {
        "id": "687a731e.a25b6c",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 1275,
        "y": 1080,
        "wires": [
            [
                "1510344.7b2f5cc"
            ]
        ]
    },
    {
        "id": "14fb3f9c.ea834",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 1275,
        "y": 1280,
        "wires": [
            [
                "ad56de76.e5894"
            ]
        ]
    },
    {
        "id": "33ccb09f.67b8",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "Misc",
        "info": "",
        "x": 50,
        "y": 20,
        "wires": []
    },
    {
        "id": "a04b530f.5953e",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "display title blank",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 170,
        "y": 260,
        "wires": [
            [
                "b205332.44d23d"
            ]
        ]
    },
    {
        "id": "b205332.44d23d",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to tittle",
        "links": [
            "bdef2fb9.9b2a7",
            "b820805.67cd78",
            "5b75260.d7992dc",
            "5768e8c1.0a8f68"
        ],
        "x": 635,
        "y": 260,
        "wires": []
    },
    {
        "id": "2da74b0e.6a95b4",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "d2caa19c.b7ab3",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Use Control : ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 570,
        "y": 2040,
        "wires": []
    },
    {
        "id": "4ce4d8d5.7ac268",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to tittle",
        "links": [
            "5b75260.d7992dc",
            "5768e8c1.0a8f68",
            "bdef2fb9.9b2a7",
            "b820805.67cd78"
        ],
        "x": 815,
        "y": 1540,
        "wires": []
    },
    {
        "id": "bdef2fb9.9b2a7",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from text control",
        "links": [
            "b205332.44d23d",
            "4ce4d8d5.7ac268"
        ],
        "x": 315,
        "y": 2040,
        "wires": [
            [
                "2da74b0e.6a95b4"
            ]
        ]
    },
    {
        "id": "b454848b.09c208",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "68704283.9c276c",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Use Control : ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 350,
        "y": 2740,
        "wires": []
    },
    {
        "id": "b820805.67cd78",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from text control",
        "links": [
            "b205332.44d23d",
            "4ce4d8d5.7ac268"
        ],
        "x": 215,
        "y": 2740,
        "wires": [
            [
                "b454848b.09c208"
            ]
        ]
    },
    {
        "id": "21dbe73c.f88cc8",
        "type": "ui_text",
        "z": "c234feb0.ef673",
        "group": "3c8c110d.30d28e",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Use Control : ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 350,
        "y": 3200,
        "wires": []
    },
    {
        "id": "5b75260.d7992dc",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from text control",
        "links": [
            "b205332.44d23d",
            "4ce4d8d5.7ac268"
        ],
        "x": 215,
        "y": 3200,
        "wires": [
            [
                "21dbe73c.f88cc8"
            ]
        ]
    },
    {
        "id": "38f5c439.f9d10c",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1580,
        "wires": [
            [
                "289a19fc.580166",
                "e5ba5de1.7392e"
            ]
        ]
    },
    {
        "id": "bfb08906.245308",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1620,
        "wires": [
            [
                "289a19fc.580166",
                "e5ba5de1.7392e"
            ]
        ]
    },
    {
        "id": "28aed160.af10fe",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "buttonstart",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 130,
        "y": 1580,
        "wires": [
            [
                "38f5c439.f9d10c"
            ],
            [
                "bfb08906.245308"
            ]
        ]
    },
    {
        "id": "9e5b2012.ec0c7",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from start bt",
        "links": [
            "4ab780f8.ebbc6"
        ],
        "x": 35,
        "y": 1580,
        "wires": [
            [
                "28aed160.af10fe"
            ]
        ]
    },
    {
        "id": "ade9e636.8aae58",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "buttonstart",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 1680,
        "wires": [
            [
                "824785c6.5a6aa8"
            ],
            []
        ]
    },
    {
        "id": "9ab1e952.6bbb18",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from start bt",
        "links": [
            "4ab780f8.ebbc6"
        ],
        "x": 555,
        "y": 1680,
        "wires": [
            [
                "ade9e636.8aae58"
            ]
        ]
    },
    {
        "id": "5768e8c1.0a8f68",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from text control",
        "links": [
            "b205332.44d23d",
            "4ce4d8d5.7ac268"
        ],
        "x": 355,
        "y": 1500,
        "wires": [
            [
                "7e07a1dd.7278b"
            ]
        ]
    },
    {
        "id": "c0b72a1b.1be3b8",
        "type": "smooth",
        "z": "dea9ee4a.091b4",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "10",
        "round": "",
        "mult": "single",
        "reduce": false,
        "x": 375,
        "y": 300,
        "wires": [
            [
                "b1c8dc4c.7ce1b"
            ]
        ]
    },
    {
        "id": "b1c8dc4c.7ce1b",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[result] Flow",
        "links": [
            "67b63c2e.2c2f94",
            "b4616265.62e1f",
            "e709ab4c.06cb78",
            "8971adc6.fd3dc",
            "7d479ec6.b845c"
        ],
        "x": 475,
        "y": 300,
        "wires": []
    },
    {
        "id": "67b63c2e.2c2f94",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] Spurious",
        "links": [
            "f3bb86e0.a6e658",
            "42eae7d1.6a1c18",
            "b1c8dc4c.7ce1b",
            "42fd7799.ff7448",
            "27b561b0.fcab6e"
        ],
        "x": 155,
        "y": 460,
        "wires": [
            [
                "85467aa6.ec9d48"
            ]
        ]
    },
    {
        "id": "85467aa6.ec9d48",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "checkSpurious",
        "func": "var breathing_phase = global.get(\"breathing_phase\")\nif(breathing_phase == \"exhale\"){\n    if (msg.payload > 4.5) {\n       msg.payload = \"05_ON\"; \n    } \n} else {\n    msg.payload = '';\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 295,
        "y": 460,
        "wires": [
            [
                "70050f26.7a6cd"
            ]
        ]
    },
    {
        "id": "70050f26.7a6cd",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm] Spurious",
        "links": [
            "31673605.46d5aa",
            "b4616265.62e1f"
        ],
        "x": 415,
        "y": 460,
        "wires": []
    },
    {
        "id": "d0a9a84c.04a538",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for Spurious Breath (OK MINUS)",
        "info": "Algoritma sudah bisa:\n1. Detect spurious biasa\n2. Ganti title ke assisted\n\nPerlu ditambahkan\n1. Cek spurious baru mulai beberapa saat setelah phase exhale\n2. Ganti mode operasi ke assisted",
        "x": 190,
        "y": 420,
        "wires": []
    },
    {
        "id": "8659ce93.6c825",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "trigger",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "x": 130,
        "y": 60,
        "wires": [
            [
                "a9f345ab.4d61a8"
            ]
        ]
    },
    {
        "id": "f0504d51.205b1",
        "type": "exec",
        "z": "c234feb0.ef673",
        "command": "xdotool windowkill `xdotool getactivewindow`",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 250,
        "y": 160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "6b92f43b.cb068c",
        "type": "exec",
        "z": "c234feb0.ef673",
        "command": "DISPLAY=:0 chromium-browser --noerrdialogs --disable-infobars --incognito --disable-pinch --overscroll-history-navigation=0 --no-context-menu --kiosk http://localhost:1880/ui &",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1020,
        "y": 60,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "bd892795.347588",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug Sensor Flow",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 210,
        "y": 620,
        "wires": []
    },
    {
        "id": "a49ac80b.3cb5c8",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Sensor Pressure ---------------------------------------------------------",
        "info": "Check For:\n1. PIP > PIP_LIMIT\n2. PEEP < PEEP_LIMIT\n3. Fighting\n4. Lepas (Pres LOW)\n\nREAD PEEP\nREAD IPP",
        "x": 240,
        "y": 700,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "5416e29a.b5ec5c",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "calcBit2Pres",
        "func": "var pres_raw = parseFloat(msg.payload); // in 16 bit\npres_raw = pres_raw * 6.144 / 32768; // in volt\n\nvar pre_val = 0;\n// opt 1 offset + gain adjust\n// pres_val = ((pres_raw/5) - 0.04)/0.0012858 * 10.19716;// + global.get(\"offset_pressure\");\n\n// opt 2 regression\nvar x1 = 0.7;   var y1 = 2;\nvar x2 = 1;   var y2 = 4;\npres_val = ( (y2-y1)/(x2-x1)*(pres_raw-x1) )+y1;\n\n// opt 3 direct\npres_val = (pres_val - 28) * 35;\n\nmsg.topic = \"pressure\";\nmsg.payload = pres_val;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 270,
        "y": 780,
        "wires": [
            [
                "658d4d0.f870bb4",
                "ddf371a1.74b9b"
            ]
        ]
    },
    {
        "id": "37d8178f.70b278",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from spurious detect",
        "links": [
            "d2f96026.c8a67"
        ],
        "x": 75,
        "y": 320,
        "wires": [
            [
                "d6303d6c.27c2e"
            ]
        ]
    },
    {
        "id": "d6303d6c.27c2e",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 320,
        "wires": [
            [
                "80b25473.eb2968"
            ],
            []
        ]
    },
    {
        "id": "80b25473.eb2968",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Assisted Volume Control",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 320,
        "wires": [
            [
                "b205332.44d23d"
            ]
        ]
    },
    {
        "id": "658d4d0.f870bb4",
        "type": "smooth",
        "z": "dea9ee4a.091b4",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "1",
        "round": "",
        "mult": "single",
        "reduce": false,
        "x": 440,
        "y": 780,
        "wires": [
            [
                "4a1fa4ed.8ed21c",
                "3926d53d.28079a"
            ]
        ]
    },
    {
        "id": "b4616265.62e1f",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[debug] flow",
        "links": [
            "70050f26.7a6cd",
            "b1c8dc4c.7ce1b",
            "5ab72885.8f20e8",
            "1ff74875.1a9258"
        ],
        "x": 80,
        "y": 620,
        "wires": [
            [
                "bd892795.347588"
            ]
        ]
    },
    {
        "id": "8812a074.ce8d3",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "debug",
        "info": "",
        "x": 90,
        "y": 580,
        "wires": []
    },
    {
        "id": "4a1fa4ed.8ed21c",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[result] Pressure",
        "links": [
            "ae15df76.3131b",
            "97d329f6.711ab8",
            "b1c8636a.eb9be",
            "7315e389.c49d8c",
            "5964c537.79dcac",
            "ee53cec3.8c1f8",
            "fad18dba.be12a",
            "4940b10.c41b35",
            "31f86b64.38f734"
        ],
        "x": 635,
        "y": 780,
        "wires": []
    },
    {
        "id": "5964c537.79dcac",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] Fighting",
        "links": [
            "4a1fa4ed.8ed21c",
            "db521787.1c55e8",
            "5b7c282.4b0aad8",
            "cb3e71d2.4d081",
            "2799042e.d5a3ac"
        ],
        "x": 75,
        "y": 860,
        "wires": [
            [
                "f0fdd752.c5d718"
            ]
        ]
    },
    {
        "id": "6a3ff4f3.1ef90c",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "setAlarm()",
        "info": "01 HIGH PRESSURE\n02 LOW PRESSURE\n03 FIGHTING\n04 OVERCURRENT\n05 SPURIOUS\n06 OVER VOL\n07 LOW PEEP\n08 LOW/HIGH O2",
        "x": 80,
        "y": 1640,
        "wires": []
    },
    {
        "id": "31673605.46d5aa",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "setAlarm()",
        "links": [
            "70050f26.7a6cd",
            "da5f8db0.5ff25",
            "e7fe6470.448a98",
            "dfc70123.27b7f",
            "5ab72885.8f20e8",
            "1ff74875.1a9258",
            "cb5518a7.bf2708",
            "d2c73766.b63978"
        ],
        "x": 235,
        "y": 1680,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "31b79ed6.ad2b62",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "setAlarm",
        "func": "var res = msg.payload.split(\"_\");\nvar no = res[0];\nvar status = false;\n\nif(res[1] == \"ON\") {\n    status = true;\n}\n\nvar newmsg = { \"no\": no, \"payload\": status};\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 360,
        "y": 1720,
        "wires": [
            [
                "feb299fc.c5aff8",
                "b7a8368c.4a9828"
            ]
        ]
    },
    {
        "id": "feb299fc.c5aff8",
        "type": "switch",
        "z": "dea9ee4a.091b4",
        "name": "",
        "property": "no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "01",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "02",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "03",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "04",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "05",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "06",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "07",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "08",
                "vt": "str"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 9,
        "x": 510,
        "y": 1720,
        "wires": [
            [
                "ff2ad660.604308"
            ],
            [
                "e06609c4.1c2748"
            ],
            [
                "bbc6e2a.d5bfb2"
            ],
            [
                "e8982606.9bcfd8"
            ],
            [
                "d2f96026.c8a67"
            ],
            [
                "a0be1687.939fe8"
            ],
            [
                "ae2863cc.6ec68"
            ],
            [
                "6f9cacc2.a62124"
            ],
            []
        ]
    },
    {
        "id": "ff2ad660.604308",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm01",
        "links": [
            "a307b167.72af4",
            "7dac646f.6638dc",
            "2c6e5cb.f4603a4",
            "b62eed74.085aa",
            "850f0fee.e26f8",
            "8ac6a3d8.2b2ce",
            "b28e3b4b.c81b48",
            "5247b427.65150c",
            "54e3ba0a.3a6f34",
            "7fa1d009.57546",
            "3ad16b80.191bd4",
            "85aafab5.2f3988"
        ],
        "x": 635,
        "y": 1660,
        "wires": []
    },
    {
        "id": "e06609c4.1c2748",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm02",
        "links": [
            "77e3ca6d.48ea54"
        ],
        "x": 675,
        "y": 1660,
        "wires": []
    },
    {
        "id": "bbc6e2a.d5bfb2",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm03",
        "links": [
            "c1498ea8.9b1b8"
        ],
        "x": 635,
        "y": 1700,
        "wires": []
    },
    {
        "id": "e8982606.9bcfd8",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm04",
        "links": [
            "367fee52.ef4362"
        ],
        "x": 675,
        "y": 1700,
        "wires": []
    },
    {
        "id": "a0be1687.939fe8",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm06",
        "links": [
            "e54902b9.dc3d8"
        ],
        "x": 675,
        "y": 1740,
        "wires": []
    },
    {
        "id": "ae2863cc.6ec68",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm07",
        "links": [
            "fa2402cf.2096"
        ],
        "x": 635,
        "y": 1780,
        "wires": []
    },
    {
        "id": "6f9cacc2.a62124",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm08",
        "links": [
            "8ed1e485.860a88"
        ],
        "x": 675,
        "y": 1780,
        "wires": []
    },
    {
        "id": "d2f96026.c8a67",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "alarm05",
        "links": [
            "78e0139d.1b385c",
            "37d8178f.70b278"
        ],
        "x": 635,
        "y": 1740,
        "wires": []
    },
    {
        "id": "848e4204.08101",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for Fighting (OK Minus)",
        "info": "Perlu flag inhale/exhale, perlu init flow/global values",
        "x": 160,
        "y": 820,
        "wires": []
    },
    {
        "id": "7f60f74c.699f78",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Sensor Oxygen ---------------------------------------------------------",
        "info": "Check For:\n1. abs(FiO2% - O2 real) >= O2tol",
        "x": 230,
        "y": 1340,
        "wires": [],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "4ec1b16b.1031e",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "calcBit2Oxy",
        "func": "var ox_raw = parseFloat(msg.payload); // in 16 bit\nox_raw = ox_raw * 0.256 / 32768;\n\n// offset + gain adjust\nvar ox_val = (ox_raw * 1000 * 100/60);\n\nnewmsg = {\"topic\": '', \"payload\": '' };\nnewmsg.topic = \"oxygen\";\nnewmsg.payload = ox_val;\n\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 1380,
        "wires": [
            [
                "fac8e996.d8a5f8"
            ]
        ]
    },
    {
        "id": "fac8e996.d8a5f8",
        "type": "smooth",
        "z": "dea9ee4a.091b4",
        "name": "",
        "property": "payload",
        "action": "low",
        "count": "1",
        "round": "4",
        "mult": "single",
        "reduce": false,
        "x": 380,
        "y": 1380,
        "wires": [
            [
                "c69da0e5.62a6a"
            ]
        ]
    },
    {
        "id": "c69da0e5.62a6a",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[result] O2",
        "links": [
            "f3aea60c.da7188",
            "badf91d4.f46ac",
            "8e11e07.fd1a72"
        ],
        "x": 495,
        "y": 1380,
        "wires": []
    },
    {
        "id": "33546c1e.cf2274",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "cekO2tol",
        "func": "var O2_val = msg.payload;\nvar O2_dif = Math.abs(global.get(\"set_o2\") - O2_val);\nvar stat = \"08_OFF\";\nif(O2_dif >= global.get(\"set_o2tol\")){\n    stat = \"08_ON\";\n}\n\nmsg.payload = stat;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 1480,
        "wires": [
            [
                "da5f8db0.5ff25"
            ]
        ]
    },
    {
        "id": "f3aea60c.da7188",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] O2tol",
        "links": [
            "c69da0e5.62a6a",
            "4a01fcb8.9f9924",
            "86714de5.8225b",
            "9cf8838b.2d7b5",
            "b681f87d.ad3908"
        ],
        "x": 75,
        "y": 1480,
        "wires": [
            [
                "33546c1e.cf2274"
            ]
        ]
    },
    {
        "id": "535a0127.edfce",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for O2tol (OK)",
        "info": "Function OK\nTest OK",
        "x": 140,
        "y": 1440,
        "wires": []
    },
    {
        "id": "1b71d43.861ce2c",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "to calcBit2Flow",
        "links": [
            "4f5d0127.7ded2",
            "cfa63c08.fd6ac"
        ],
        "x": 75,
        "y": 300,
        "wires": [
            [
                "e8d6d6a6.b0f758"
            ]
        ]
    },
    {
        "id": "d0af1304.b39d1",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "d": true,
        "name": "from adc_pres",
        "links": [
            "267afd8a.63c822",
            "d252c928.860918"
        ],
        "x": 135,
        "y": 740,
        "wires": [
            [
                "5416e29a.b5ec5c"
            ]
        ]
    },
    {
        "id": "5531f708.fdf1e8",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "to calcBit2Oxy",
        "links": [
            "2e95d92d.763386",
            "e690334.e651ed"
        ],
        "x": 55,
        "y": 1380,
        "wires": [
            [
                "4ec1b16b.1031e"
            ]
        ]
    },
    {
        "id": "da5f8db0.5ff25",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm] O2tol",
        "links": [
            "31673605.46d5aa",
            "badf91d4.f46ac"
        ],
        "x": 315,
        "y": 1480,
        "wires": []
    },
    {
        "id": "e7fe6470.448a98",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm] Fighting",
        "links": [
            "ae15df76.3131b",
            "31673605.46d5aa"
        ],
        "x": 555,
        "y": 860,
        "wires": []
    },
    {
        "id": "d6f95168.7ffe2",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug Sensor Oxygen",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 200,
        "y": 1560,
        "wires": []
    },
    {
        "id": "badf91d4.f46ac",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[debug] Ox",
        "links": [
            "c69da0e5.62a6a",
            "da5f8db0.5ff25"
        ],
        "x": 60,
        "y": 1560,
        "wires": [
            [
                "d6f95168.7ffe2"
            ]
        ]
    },
    {
        "id": "5f603a67.2e3984",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "debug",
        "info": "",
        "x": 90,
        "y": 1520,
        "wires": []
    },
    {
        "id": "5be6e97d.567918",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "cekOverPressure",
        "func": "var pres_val = msg.payload;\nvar lim = global.get(\"hiplimit\");\nvar stat = \"01_OFF\";\n\nif(pres_val > lim) {\n    stat = \"01_ON\";\n}\n\nnewmsg = {'payload': '' };\nnewmsg.payload = stat;\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 1180,
        "wires": [
            [
                "dfc70123.27b7f"
            ]
        ]
    },
    {
        "id": "b1c8636a.eb9be",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] Fighting",
        "links": [
            "4a1fa4ed.8ed21c",
            "db521787.1c55e8",
            "5b7c282.4b0aad8",
            "cb3e71d2.4d081",
            "2799042e.d5a3ac"
        ],
        "x": 75,
        "y": 1180,
        "wires": [
            [
                "5be6e97d.567918"
            ]
        ]
    },
    {
        "id": "ff8cfa2b.447d08",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for Over Pressure",
        "info": "Test OK",
        "x": 150,
        "y": 1140,
        "wires": []
    },
    {
        "id": "dfc70123.27b7f",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm] HighPres",
        "links": [
            "31673605.46d5aa",
            "ae15df76.3131b"
        ],
        "x": 335,
        "y": 1180,
        "wires": []
    },
    {
        "id": "cb3d77d7.21fc18",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug Sensor Pressure",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 225,
        "y": 1260,
        "wires": []
    },
    {
        "id": "ae15df76.3131b",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[debug] Pres",
        "links": [
            "4a1fa4ed.8ed21c",
            "dfc70123.27b7f",
            "e7fe6470.448a98",
            "bc40cce.d2ceb3",
            "f8302b21.cebd28",
            "d8d65aa7.3b4e78",
            "cda0c969.221fc8"
        ],
        "x": 75,
        "y": 1260,
        "wires": [
            [
                "cb3d77d7.21fc18"
            ]
        ]
    },
    {
        "id": "82ff99d0.2b0808",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "debug",
        "info": "",
        "x": 90,
        "y": 1220,
        "wires": []
    },
    {
        "id": "3571f834.01dfb8",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "cekPresLow",
        "func": "var pres_val = msg.payload;\nvar lim = global.get(\"set_loplimit\");\nvar stat = \"02_OFF\";\nvar startCount = global.get(\"start_count\") || 0;\n\nif(pres_val < lim && startCount > 0) {\n    stat = \"02_ON\";\n}\n\nnewmsg = {'payload': '' };\nnewmsg.payload = stat;\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1180,
        "wires": [
            [
                "bc40cce.d2ceb3"
            ]
        ]
    },
    {
        "id": "7315e389.c49d8c",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] Fighting",
        "links": [
            "4a1fa4ed.8ed21c",
            "db521787.1c55e8",
            "5b7c282.4b0aad8"
        ],
        "x": 455,
        "y": 1180,
        "wires": [
            [
                "3571f834.01dfb8"
            ]
        ]
    },
    {
        "id": "1e3e90b1.9711af",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for Under Pressure (OK MINUS)",
        "info": "Test OK, countStart perlu ditambahkan",
        "x": 570,
        "y": 1140,
        "wires": []
    },
    {
        "id": "bc40cce.d2ceb3",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm] LowPres",
        "links": [
            "ae15df76.3131b",
            "31673605.46d5aa"
        ],
        "x": 715,
        "y": 1180,
        "wires": []
    },
    {
        "id": "637156ed.b40f78",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "cekPEEPLow",
        "func": "var breathing_phase = global.get(\"breathing_phase\")\n\nvar pres_val = msg.payload;\nvar lim = global.get(\"set_peep\");\n\nvar stat = \"07_OFF\";\n\nif(pres_val < lim && breathing_phase == \"exhale\") {\n    stat = \"07_ON\";\n}\n\nnewmsg = {'payload': '' };\nnewmsg.payload = stat;\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 1260,
        "wires": [
            [
                "f8302b21.cebd28"
            ]
        ]
    },
    {
        "id": "fad18dba.be12a",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] Fighting",
        "links": [
            "4a1fa4ed.8ed21c",
            "db521787.1c55e8",
            "5b7c282.4b0aad8"
        ],
        "x": 455,
        "y": 1260,
        "wires": [
            [
                "637156ed.b40f78"
            ]
        ]
    },
    {
        "id": "9202e47b.087408",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for Low PEEP (OK)",
        "info": "Test OK",
        "x": 530,
        "y": 1220,
        "wires": []
    },
    {
        "id": "f8302b21.cebd28",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm] LowPEEP",
        "links": [
            "ae15df76.3131b",
            "31673605.46d5aa"
        ],
        "x": 715,
        "y": 1260,
        "wires": []
    },
    {
        "id": "8971adc6.fd3dc",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "[check] Spurious",
        "links": [
            "f3bb86e0.a6e658",
            "42eae7d1.6a1c18",
            "b1c8dc4c.7ce1b",
            "42fd7799.ff7448",
            "27b561b0.fcab6e"
        ],
        "x": 155,
        "y": 540,
        "wires": [
            [
                "ac9bb3bc.078"
            ]
        ]
    },
    {
        "id": "ac9bb3bc.078",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "checkOverVol",
        "func": "var breathing_phase = global.get(\"breathing_phase\")\nvar vol_count = global.get(\"vol_count\");\nvar flow_val = msg.payload;\n\nvar alarmvol = \"06_OFF\";\n\nvol_count += flow_val;\n\nif(breathing_phase == \"inhale\"){\n    if (vol_count >= parseFloat(global.get(\"set_vol\"))) {\n       alarmvol = \"06_ON\"; \n    } \n}\n\nglobal.set(\"vol_count\", vol_count);\n\nmsg.payload = alarmvol;\nmsg.vol = vol_count;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 295,
        "y": 540,
        "wires": [
            [
                "1ff74875.1a9258"
            ]
        ]
    },
    {
        "id": "1ff74875.1a9258",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "[alarm2] OverFlow",
        "links": [
            "31673605.46d5aa",
            "b4616265.62e1f"
        ],
        "x": 415,
        "y": 540,
        "wires": []
    },
    {
        "id": "4bde1df2.19a0f4",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Check for Over Volume (OK)",
        "info": "Function OK, test OK",
        "x": 160,
        "y": 500,
        "wires": []
    },
    {
        "id": "a9f345ab.4d61a8",
        "type": "exec",
        "z": "c234feb0.ef673",
        "command": "pkill chromium",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 300,
        "y": 60,
        "wires": [
            [
                "6b92f43b.cb068c"
            ],
            [],
            []
        ]
    },
    {
        "id": "c7288341.d13ec",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "graph data generator",
        "info": "",
        "x": 100,
        "y": 540,
        "wires": []
    },
    {
        "id": "85c7d5d6.b280e8",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "30",
        "x": 110,
        "y": 620,
        "wires": [
            [
                "31e26ae6.e857d6"
            ]
        ]
    },
    {
        "id": "31e26ae6.e857d6",
        "type": "random",
        "z": "927d9689.f973b8",
        "name": "",
        "low": "1",
        "high": "40",
        "inte": "true",
        "property": "payload",
        "x": 240,
        "y": 620,
        "wires": [
            [
                "b78639a7.bbfa18"
            ]
        ]
    },
    {
        "id": "fb155a9e.666a08",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "set_ie",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 390,
        "y": 2100,
        "wires": [
            [
                "9e5083eb.10b49"
            ]
        ]
    },
    {
        "id": "14d613bd.2db6ec",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "set_rr",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 390,
        "y": 2160,
        "wires": [
            [
                "a2cf4b84.116528"
            ]
        ]
    },
    {
        "id": "feaeb422.dc6708",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "set_o2",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 400,
        "y": 2220,
        "wires": [
            [
                "7a3cdc4b.f27aa4"
            ]
        ]
    },
    {
        "id": "7f15af2b.5be5b",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "set_peep",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 400,
        "y": 2280,
        "wires": [
            [
                "c2394a35.d329e8"
            ]
        ]
    },
    {
        "id": "72e7abe7.46f8a4",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "set_vol",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 400,
        "y": 2340,
        "wires": [
            [
                "80d11a72.28cf58"
            ]
        ]
    },
    {
        "id": "51a070b9.5344b",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "set_ie",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "30dffc27.ff8d94",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "set_rr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "15718ce9.06eff3",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "set_o2",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "48c392db.931dec",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "set_peep",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "30f6fcdb.58a144",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "set_vol",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "145934d9.c4745b",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "editor breathing parameters",
        "info": "",
        "x": 1280,
        "y": 40,
        "wires": []
    },
    {
        "id": "228d020d.2323ae",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor ie",
        "links": [
            "953eaf6b.52996"
        ],
        "x": 1195,
        "y": 80,
        "wires": [
            [
                "51a070b9.5344b"
            ]
        ]
    },
    {
        "id": "41601ef0.27069",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor rr",
        "links": [
            "f9b71d27.834f7"
        ],
        "x": 1195,
        "y": 120,
        "wires": [
            [
                "30dffc27.ff8d94"
            ]
        ]
    },
    {
        "id": "3157c4a6.447b7c",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor o2",
        "links": [
            "e341c51f.ad4088"
        ],
        "x": 1195,
        "y": 160,
        "wires": [
            [
                "15718ce9.06eff3"
            ]
        ]
    },
    {
        "id": "df7a575e.bbefa8",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor peep",
        "links": [
            "af08716c.4e3fb"
        ],
        "x": 1195,
        "y": 200,
        "wires": [
            [
                "48c392db.931dec"
            ]
        ]
    },
    {
        "id": "ff370422.368ae8",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor vol",
        "links": [
            "979fa7b8.14cbe8"
        ],
        "x": 1195,
        "y": 240,
        "wires": [
            [
                "30f6fcdb.58a144"
            ]
        ]
    },
    {
        "id": "953eaf6b.52996",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor ie",
        "links": [
            "228d020d.2323ae"
        ],
        "x": 735,
        "y": 2100,
        "wires": []
    },
    {
        "id": "f9b71d27.834f7",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor rr",
        "links": [
            "41601ef0.27069"
        ],
        "x": 735,
        "y": 2160,
        "wires": []
    },
    {
        "id": "e341c51f.ad4088",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor o2",
        "links": [
            "3157c4a6.447b7c"
        ],
        "x": 735,
        "y": 2220,
        "wires": []
    },
    {
        "id": "af08716c.4e3fb",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor peep",
        "links": [
            "df7a575e.bbefa8"
        ],
        "x": 735,
        "y": 2280,
        "wires": []
    },
    {
        "id": "979fa7b8.14cbe8",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor vol",
        "links": [
            "ff370422.368ae8"
        ],
        "x": 735,
        "y": 2340,
        "wires": []
    },
    {
        "id": "be86c30c.638cb",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "hiplimit",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 140,
        "y": 2800,
        "wires": [
            [
                "e4c8a88a.2a6408"
            ]
        ]
    },
    {
        "id": "3e35922f.1b8ece",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "loplimit",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 140,
        "y": 2860,
        "wires": [
            [
                "da24ec72.0220a"
            ]
        ]
    },
    {
        "id": "53f755a7.34924c",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "o2tol",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "x": 130,
        "y": 2920,
        "wires": [
            [
                "9fd1f288.4efd1"
            ]
        ]
    },
    {
        "id": "5198e279.628d1c",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor hiplimit",
        "links": [
            "b9849927.030618",
            "213e3105.c4a15e"
        ],
        "x": 615,
        "y": 2800,
        "wires": []
    },
    {
        "id": "924206.fb57adf8",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor loplimit",
        "links": [
            "65fbf9ba.6943c8"
        ],
        "x": 615,
        "y": 2860,
        "wires": []
    },
    {
        "id": "f66bd94e.cc3788",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to editor o2tol",
        "links": [
            "76ae0556.2b69cc"
        ],
        "x": 615,
        "y": 2920,
        "wires": []
    },
    {
        "id": "8a00fcfa.6838e",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hiplimit",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "c6e22175.4b938",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "editor alarm parameters",
        "info": "",
        "x": 1260,
        "y": 360,
        "wires": []
    },
    {
        "id": "2a426ace.16df96",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "loplimit",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "98a3d9.70a3cc28",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "o2tol",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "b9849927.030618",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor hiplimit",
        "links": [
            "5198e279.628d1c"
        ],
        "x": 1195,
        "y": 400,
        "wires": [
            [
                "8a00fcfa.6838e"
            ]
        ]
    },
    {
        "id": "65fbf9ba.6943c8",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor loplimit",
        "links": [
            "924206.fb57adf8"
        ],
        "x": 1195,
        "y": 440,
        "wires": [
            [
                "2a426ace.16df96"
            ]
        ]
    },
    {
        "id": "76ae0556.2b69cc",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from editor o2tol",
        "links": [
            "f66bd94e.cc3788"
        ],
        "x": 1195,
        "y": 480,
        "wires": [
            [
                "98a3d9.70a3cc28"
            ]
        ]
    },
    {
        "id": "89ad3736.67d798",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "labelsilence",
                "pt": "msg",
                "to": "Mute",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "coloursilence",
                "pt": "msg",
                "to": "teal",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "buttonsilence",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "textcoloursilence",
                "pt": "msg",
                "to": "white",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 460,
        "wires": [
            [
                "5409e052.3271b",
                "f7fc8fec.8737e",
                "75db60ac.33d2c",
                "15c91d30.c79da3"
            ]
        ]
    },
    {
        "id": "df265240.6b18b",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "buttonsilence",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 460,
        "wires": [
            [
                "89ad3736.67d798",
                "e618bb00.722458"
            ],
            [
                "7d4c1858.116088",
                "856dc837.6c15d8"
            ]
        ]
    },
    {
        "id": "7d4c1858.116088",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "labelsilence",
                "pt": "msg",
                "to": "Unmute",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "coloursilence",
                "pt": "msg",
                "to": "lightblue",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "buttonsilence",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "textcoloursilence",
                "pt": "msg",
                "to": "black",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 500,
        "wires": [
            [
                "5409e052.3271b",
                "f7fc8fec.8737e",
                "75db60ac.33d2c",
                "15c91d30.c79da3"
            ]
        ]
    },
    {
        "id": "e3595e82.83321",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from trigger",
        "links": [
            "e2843ce7.aac6d"
        ],
        "x": 475,
        "y": 420,
        "wires": [
            [
                "89ad3736.67d798"
            ]
        ]
    },
    {
        "id": "856dc837.6c15d8",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to buzzer control on",
        "links": [
            "bb5c1f85.cf818",
            "61d887ea.962de8"
        ],
        "x": 1195,
        "y": 500,
        "wires": []
    },
    {
        "id": "e618bb00.722458",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to buzzer control off",
        "links": [
            "538bc0cd.e45e9",
            "c5a345cf.c8bcb8"
        ],
        "x": 1195,
        "y": 460,
        "wires": []
    },
    {
        "id": "972827e9.23a288",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "added connection from dashboard, by BWE ------------------------------------------------",
        "info": "",
        "x": 300,
        "y": 900,
        "wires": []
    },
    {
        "id": "63258e24.c72f5",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "bt start command",
        "info": "",
        "x": 100,
        "y": 940,
        "wires": []
    },
    {
        "id": "3f279997.156ce6",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "from start bt",
        "links": [
            "f9377632.a92ce8"
        ],
        "x": 155,
        "y": 980,
        "wires": [
            [
                "d8f5db00.78ff38"
            ]
        ]
    },
    {
        "id": "94978591.96e0c8",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "bt stop command",
        "info": "",
        "x": 100,
        "y": 1020,
        "wires": []
    },
    {
        "id": "74f1b1bf.0efed",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "from stop bt",
        "links": [
            "581231ac.514fc"
        ],
        "x": 155,
        "y": 1060,
        "wires": [
            [
                "59f229d6.ee9ca8"
            ]
        ]
    },
    {
        "id": "f9377632.a92ce8",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to start routine",
        "links": [
            "3f279997.156ce6"
        ],
        "x": 915,
        "y": 3540,
        "wires": []
    },
    {
        "id": "581231ac.514fc",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to stop routine",
        "links": [
            "74f1b1bf.0efed"
        ],
        "x": 915,
        "y": 3500,
        "wires": []
    },
    {
        "id": "e115d480.807158",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "editor mode mandatory/assisted",
        "info": "",
        "x": 1290,
        "y": 560,
        "wires": []
    },
    {
        "id": "20338bc5.872254",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "modemandatory",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1440,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "c8417a3a.212d58",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "modemandatory",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1440,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "bf104aaf.068e68",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from mandatory choice",
        "links": [
            "2fbac5a6.5764ca"
        ],
        "x": 1195,
        "y": 600,
        "wires": [
            [
                "20338bc5.872254"
            ]
        ]
    },
    {
        "id": "42697e6b.2e817",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "from assisted choice",
        "links": [
            "4116245a.4a3cbc"
        ],
        "x": 1195,
        "y": 640,
        "wires": [
            [
                "c8417a3a.212d58"
            ]
        ]
    },
    {
        "id": "2fbac5a6.5764ca",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to mandatory choice",
        "links": [
            "bf104aaf.068e68"
        ],
        "x": 815,
        "y": 1580,
        "wires": []
    },
    {
        "id": "4116245a.4a3cbc",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to assisted choice",
        "links": [
            "42697e6b.2e817"
        ],
        "x": 815,
        "y": 1620,
        "wires": []
    },
    {
        "id": "6edada01.7d3e94",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "bt breathing updated",
        "info": "",
        "x": 110,
        "y": 1220,
        "wires": []
    },
    {
        "id": "2e787e04.3ab6c2",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "from trigger breathing bt",
        "links": [
            "299946d3.4debca"
        ],
        "x": 155,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "299946d3.4debca",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to trigger breathing update",
        "links": [
            "2e787e04.3ab6c2"
        ],
        "x": 675,
        "y": 2480,
        "wires": []
    },
    {
        "id": "2b359a2f.5de826",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "bt alarm updated",
        "info": "",
        "x": 300,
        "y": 1220,
        "wires": []
    },
    {
        "id": "85dd86d.f7c4278",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "from trigger alarm bt",
        "links": [
            "15e84c24.fd05c4",
            "43aeaf3f.ec01f"
        ],
        "x": 355,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "1ac2ca74.3a7036",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "to trigger mode update",
        "links": [
            "b03c1636.e2f108"
        ],
        "x": 1155,
        "y": 1740,
        "wires": []
    },
    {
        "id": "b1b71f46.9e51",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "bt mode updated",
        "info": "",
        "x": 480,
        "y": 1220,
        "wires": []
    },
    {
        "id": "b03c1636.e2f108",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "from trigger mode bt",
        "links": [
            "1ac2ca74.3a7036"
        ],
        "x": 535,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "39c5981f.7479e8",
        "type": "rpi-gpio out",
        "z": "55d0620b.dc73dc",
        "name": "to_ENABLE_PIN",
        "pin": "15",
        "set": true,
        "level": "1",
        "freq": "",
        "out": "out",
        "x": 790,
        "y": 360,
        "wires": []
    },
    {
        "id": "567f2d41.1d3464",
        "type": "rpi-gpio out",
        "z": "55d0620b.dc73dc",
        "name": "to_DIRECTION_PIN",
        "pin": "13",
        "set": true,
        "level": "1",
        "freq": "",
        "out": "out",
        "x": 800,
        "y": 280,
        "wires": []
    },
    {
        "id": "34be44b6.d4cdfc",
        "type": "rpi-gpio out",
        "z": "55d0620b.dc73dc",
        "name": "to_PULSE_PIN",
        "pin": "11",
        "set": true,
        "level": "1",
        "freq": "",
        "out": "out",
        "x": 780,
        "y": 140,
        "wires": []
    },
    {
        "id": "edcae91e.299818",
        "type": "delay",
        "z": "55d0620b.dc73dc",
        "name": "Delay",
        "pauseType": "delayv",
        "timeout": "0.1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 550,
        "y": 140,
        "wires": [
            [
                "9341ef55.cbfbc"
            ]
        ]
    },
    {
        "id": "2f79e1ec.eac79e",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "convertToMilliSecond",
        "func": "var received = parseFloat(msg.payload);\n\nvar delay_val = received/1000;\n\nmsg.payload = 1;\nmsg.delay = delay_val;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 360,
        "y": 140,
        "wires": [
            [
                "edcae91e.299818"
            ]
        ]
    },
    {
        "id": "a0cc6cc5.5d3e5",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "Stepper pulse",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 780,
        "y": 200,
        "wires": []
    },
    {
        "id": "b863146f.f55a48",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pulse_signal",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "818d7932.c28e48",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "Initialization",
        "topic": "1",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 90,
        "y": 80,
        "wires": [
            [
                "b863146f.f55a48"
            ]
        ]
    },
    {
        "id": "9341ef55.cbfbc",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "pulse_switcher",
        "rules": [
            {
                "t": "change",
                "p": "pulse_signal",
                "pt": "global",
                "from": "true",
                "fromt": "bool",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "change",
                "p": "pulse_signal",
                "pt": "global",
                "from": "false",
                "fromt": "bool",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 200,
        "wires": [
            [
                "5a6ef891.ea6068"
            ]
        ]
    },
    {
        "id": "5a6ef891.ea6068",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "pulse_assigner",
        "func": "msg.payload = global.get(\"pulse_signal\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 200,
        "wires": [
            [
                "34be44b6.d4cdfc",
                "a0cc6cc5.5d3e5"
            ]
        ]
    },
    {
        "id": "f00c8472.57e1d8",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Stepper Driver Control vCustom",
        "info": "",
        "x": 130,
        "y": 20,
        "wires": []
    },
    {
        "id": "c27e64bf.aa0358",
        "type": "exec",
        "z": "811eb35.554d75",
        "d": true,
        "command": "python3 -u ~/ventilator/stepper_driver_v3.py",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 250,
        "y": 160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d72bef2d.59b31",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Buzzer",
        "info": "",
        "x": 70,
        "y": 1900,
        "wires": []
    },
    {
        "id": "94c1c4f0.a76b38",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "vnc port 1 runner",
        "info": "",
        "x": 80,
        "y": 760,
        "wires": []
    },
    {
        "id": "2f2888da.55dd18",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 90,
        "y": 800,
        "wires": [
            [
                "2874e128.136cfe"
            ]
        ]
    },
    {
        "id": "2874e128.136cfe",
        "type": "exec",
        "z": "927d9689.f973b8",
        "command": "vncserver",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 240,
        "y": 800,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "7804d2ff.396c6c",
        "type": "ui_template",
        "z": "c234feb0.ef673",
        "group": "410c9e1f.ac8cf",
        "name": "",
        "order": 1,
        "width": "9",
        "height": "4",
        "format": "<iframe src=\"http://localhost:3000/d-solo/isM3hhmgz/ventilator2?orgId=1&refresh=%201s&from=now-7s&to=now&panelId=2\" width=\"500\" height=\"200\" frameborder=\"0\"></iframe>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 560,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "c5a345cf.c8bcb8",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "from buzzer control off",
        "links": [
            "e618bb00.722458"
        ],
        "x": 135,
        "y": 2320,
        "wires": [
            [
                "a00b20be.2635a"
            ]
        ]
    },
    {
        "id": "50878b9f.37e794",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "bt mute off",
        "info": "",
        "x": 100,
        "y": 2180,
        "wires": []
    },
    {
        "id": "61d887ea.962de8",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "from buzzer control on",
        "links": [
            "856dc837.6c15d8"
        ],
        "x": 175,
        "y": 2120,
        "wires": [
            [
                "32a43a10.5359e6"
            ]
        ]
    },
    {
        "id": "6b8580b6.49a36",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "bt mute on",
        "info": "",
        "x": 100,
        "y": 2080,
        "wires": []
    },
    {
        "id": "956dff3e.cc8ca",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "setBuzzerLevel",
        "func": "    var high = false;\n    var med = false;\n    var low = false;\n    var mute = global.get(\"buzzer_mute\");\n    var level = 0;\n    \n    var alarm_01 = global.get(\"alarm_01\")\n    var alarm_02 = global.get(\"alarm_02\")\n    var alarm_03 = global.get(\"alarm_03\")\n    var alarm_04 = global.get(\"alarm_04\")\n    var alarm_05 = global.get(\"alarm_05\")\n    var alarm_06 = global.get(\"alarm_06\")\n    var alarm_07 = global.get(\"alarm_07\")\n    var alarm_08 = global.get(\"alarm_08\")\n    \n    high = (alarm_01 || alarm_02 || alarm_03 || alarm_04);\n    med = (alarm_05 || alarm_06 || alarm_07);\n    low = alarm_08;\n    \n    if (mute) {level = 0;}\n    else if (high) {level = 3;}\n    else if (med) {level = 2;}\n    else if (low) {level = 1;}\n    \n    msg.topic = \"buzzer/level\"\n    msg.payload = level;\n    msg.stat_high = high;\n    msg.stat_med = med;\n    msg.stat_low = low;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 240,
        "y": 1960,
        "wires": [
            [
                "9c6f3efb.489da",
                "c228d638.d47088"
            ]
        ]
    },
    {
        "id": "a00b20be.2635a",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "buzzer_mute",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 2320,
        "wires": [
            [
                "f88df0b6.df064"
            ]
        ]
    },
    {
        "id": "32a43a10.5359e6",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "buzzer_mute",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 2120,
        "wires": [
            [
                "2fa6ce0c.a892c2"
            ]
        ]
    },
    {
        "id": "b78639a7.bbfa18",
        "type": "smooth",
        "z": "927d9689.f973b8",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "2",
        "round": "1",
        "mult": "single",
        "reduce": false,
        "x": 400,
        "y": 620,
        "wires": [
            [
                "569bf189.12a8d"
            ]
        ]
    },
    {
        "id": "9c6f3efb.489da",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug Buzzer",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 280,
        "y": 2000,
        "wires": []
    },
    {
        "id": "6dc6508c.f0bdb",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "08_ON",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 250,
        "y": 1780,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "b7a8368c.4a9828",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "setAlarmGlobalVar",
        "func": "switch (msg.no) {\n    case \"01\": global.set(\"alarm_01\", msg.payload); break;\n    case \"02\": global.set(\"alarm_02\", msg.payload); break;\n    case \"03\": global.set(\"alarm_03\", msg.payload); break;\n    case \"04\": global.set(\"alarm_04\", msg.payload); break;\n    case \"05\": global.set(\"alarm_05\", msg.payload); break;\n    case \"06\": global.set(\"alarm_06\", msg.payload); break;\n    case \"07\": global.set(\"alarm_07\", msg.payload); break;\n    case \"08\": global.set(\"alarm_08\", msg.payload); break;\n    case \"99\":\n        global.set(\"alarm_01\", msg.payload);\n        global.set(\"alarm_02\", msg.payload);\n        global.set(\"alarm_03\", msg.payload);\n        global.set(\"alarm_04\", msg.payload);\n        global.set(\"alarm_05\", msg.payload);\n        global.set(\"alarm_06\", msg.payload);\n        global.set(\"alarm_07\", msg.payload);\n        global.set(\"alarm_08\", msg.payload);\n        break;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 1820,
        "wires": [
            [
                "1b9881e9.395ade"
            ]
        ]
    },
    {
        "id": "7213e951.89b0a8",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "bt alarm reset (v2)",
        "info": "",
        "x": 130,
        "y": 2380,
        "wires": []
    },
    {
        "id": "559e0520.f5d26c",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "from alarm reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 175,
        "y": 2420,
        "wires": [
            [
                "7a83357a.6afa5c"
            ]
        ]
    },
    {
        "id": "7a83357a.6afa5c",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "99_OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 2420,
        "wires": [
            [
                "cb5518a7.bf2708"
            ]
        ]
    },
    {
        "id": "cb5518a7.bf2708",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from setAlarmReset",
        "links": [
            "31673605.46d5aa"
        ],
        "x": 455,
        "y": 2420,
        "wires": []
    },
    {
        "id": "24e7972b.3edcb8",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "setBuzzerLevel()",
        "links": [
            "1b9881e9.395ade",
            "f88df0b6.df064",
            "7385ff53.e96d4",
            "2fa6ce0c.a892c2"
        ],
        "x": 115,
        "y": 1960,
        "wires": [
            [
                "956dff3e.cc8ca"
            ]
        ]
    },
    {
        "id": "1b9881e9.395ade",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from setAlarmGlobalVar",
        "links": [
            "24e7972b.3edcb8"
        ],
        "x": 715,
        "y": 1820,
        "wires": []
    },
    {
        "id": "3ae81c0b.f342c4",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "Initialize global var. (buzzer_mute and alarm_0x) (v2)",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 240,
        "y": 2220,
        "wires": [
            [
                "a00b20be.2635a",
                "990e7771.64e5c8"
            ]
        ]
    },
    {
        "id": "990e7771.64e5c8",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "99_OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 2280,
        "wires": [
            [
                "d2c73766.b63978"
            ]
        ]
    },
    {
        "id": "f88df0b6.df064",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from setMuteOff",
        "links": [
            "24e7972b.3edcb8"
        ],
        "x": 515,
        "y": 2320,
        "wires": []
    },
    {
        "id": "d2c73766.b63978",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from initialMuteOff",
        "links": [
            "31673605.46d5aa"
        ],
        "x": 515,
        "y": 2280,
        "wires": []
    },
    {
        "id": "2fa6ce0c.a892c2",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from setMuteOn",
        "links": [
            "24e7972b.3edcb8"
        ],
        "x": 515,
        "y": 2120,
        "wires": []
    },
    {
        "id": "730f771d.6ad218",
        "type": "switch",
        "z": "dea9ee4a.091b4",
        "name": "toneLevelSwitch",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 600,
        "y": 1960,
        "wires": [
            [
                "632b827f.a0febc"
            ],
            [
                "cbfe8a09.cd51e8"
            ],
            [
                "d22b934c.ec2b8"
            ],
            [
                "fc8cf0e0.7941e"
            ],
            [
                "5e9dc28f.33105c"
            ],
            [
                "5b863297.ea19bc"
            ]
        ]
    },
    {
        "id": "632b827f.a0febc",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "buzzer_on",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1940,
        "wires": [
            [
                "243f9a3a.002d86"
            ]
        ]
    },
    {
        "id": "5b863297.ea19bc",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "buzzer_off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1980,
        "wires": [
            [
                "243f9a3a.002d86"
            ]
        ]
    },
    {
        "id": "243f9a3a.002d86",
        "type": "rpi-gpio out",
        "z": "dea9ee4a.091b4",
        "name": "BUZZER_PIN",
        "pin": "7",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "x": 1540,
        "y": 1940,
        "wires": []
    },
    {
        "id": "a2f103ba.ee388",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1350,
        "y": 2060,
        "wires": [
            [
                "243f9a3a.002d86"
            ]
        ]
    },
    {
        "id": "7feaebf2.c87784",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1350,
        "y": 2020,
        "wires": [
            [
                "243f9a3a.002d86"
            ]
        ]
    },
    {
        "id": "acd088e3.e94be8",
        "type": "delay",
        "z": "dea9ee4a.091b4",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1070,
        "y": 2140,
        "wires": [
            [
                "bf8a08c8.05bc88"
            ]
        ]
    },
    {
        "id": "70b84d47.93d774",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 2100,
        "wires": [
            [
                "acd088e3.e94be8",
                "632b827f.a0febc"
            ]
        ]
    },
    {
        "id": "bf8a08c8.05bc88",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 2180,
        "wires": [
            [
                "5b863297.ea19bc"
            ]
        ]
    },
    {
        "id": "cbfe8a09.cd51e8",
        "type": "trigger",
        "z": "dea9ee4a.091b4",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-500",
        "extend": false,
        "units": "ms",
        "reset": "0",
        "bytopic": "all",
        "name": "",
        "x": 860,
        "y": 2100,
        "wires": [
            [
                "70b84d47.93d774"
            ]
        ]
    },
    {
        "id": "d22b934c.ec2b8",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 2060,
        "wires": [
            [
                "cbfe8a09.cd51e8"
            ]
        ]
    },
    {
        "id": "5e9dc28f.33105c",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 2260,
        "wires": [
            [
                "fc8cf0e0.7941e"
            ]
        ]
    },
    {
        "id": "fc8cf0e0.7941e",
        "type": "trigger",
        "z": "dea9ee4a.091b4",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-1",
        "extend": false,
        "units": "s",
        "reset": "0",
        "bytopic": "all",
        "name": "",
        "x": 840,
        "y": 2300,
        "wires": [
            [
                "13d35b64.709d15"
            ]
        ]
    },
    {
        "id": "13d35b64.709d15",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 2300,
        "wires": [
            [
                "fa7fa22a.467c6",
                "632b827f.a0febc"
            ]
        ]
    },
    {
        "id": "fa7fa22a.467c6",
        "type": "delay",
        "z": "dea9ee4a.091b4",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1030,
        "y": 2340,
        "wires": [
            [
                "241c579c.3d9818"
            ]
        ]
    },
    {
        "id": "241c579c.3d9818",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 2380,
        "wires": [
            [
                "5b863297.ea19bc"
            ]
        ]
    },
    {
        "id": "c228d638.d47088",
        "type": "rbe",
        "z": "dea9ee4a.091b4",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 430,
        "y": 1960,
        "wires": [
            [
                "730f771d.6ad218"
            ]
        ]
    },
    {
        "id": "a434dc84.5c273",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "01_ON",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 90,
        "y": 1700,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "4d44a657.63fae8",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "01_OFF",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 100,
        "y": 1740,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "6c1f750b.72d76c",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "08_OFF",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 260,
        "y": 1820,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "8a893358.1b584",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "05_ON",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 90,
        "y": 1780,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "36ff55a1.9bc1ca",
        "type": "inject",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "",
        "payload": "05_OFF",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 100,
        "y": 1820,
        "wires": [
            [
                "31b79ed6.ad2b62"
            ]
        ]
    },
    {
        "id": "a89d722a.2df86",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Level Low Routine",
        "info": "",
        "x": 830,
        "y": 2220,
        "wires": []
    },
    {
        "id": "8915082f.65ac68",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Level Medium Routine",
        "info": "",
        "x": 840,
        "y": 2020,
        "wires": []
    },
    {
        "id": "d0b399e2.a73268",
        "type": "function",
        "z": "811eb35.554d75",
        "d": true,
        "name": "setStepCount",
        "func": "//-- Var declaration\nvar ie = global.get(\"set_ie\");\nvar rr = global.get(\"set_rr\");\nvar peep = global.get(\"set_peep\");\nvar vol = global.get(\"set_vol\");\nvar pulse_width_i = 1000; // dummy value\nvar step_count = 1;\n\n//-- Cycle time\nvar cycle_period = 60000000/rr; //in microsec\nvar inhale_time = cycle_period/(ie+1);    //in microsec\n// step_count = vol*2;\n// pulse_width_i = Math.round(inhale_time/step_count);\n\n/* note from pak Samudra\nLinear move = vol / 153.86\nRotasi shaft = linearMove / 0.4\nRotasi Motor = rotasi shaft * 10/60 = 2.166 rotasi\nIE 1:3 RR 30, waktu inhale 0.5 detik\n2.166 rotasi/0.5detik = 4.333 rps = 259.97 rpm\n*/\n\n//-- Piston mechanism\nconst PUSHER_DIA = 14; // in cm\nvar pusher_area = 3.14 * 0.25 * ((PUSHER_DIA)^2); // in cm^2\n\n//var moving_dist_linear = 7.1494; // min to max movement, in cm\nvar moving_dist_linear = vol / pusher_area; // in cm, vol in mL\n\nconst LIN_SCREW_PITCH = 0.4; // in cm per rotation\nvar shaft_rotation = moving_dist_linear / LIN_SCREW_PITCH; // in rotation, moving_dist_linear in cm\n\nconst MOTOR_TO_SHAFT_RATIO = 10/300; // based on pulley configuration\nvar motor_rotation = shaft_rotation * MOTOR_TO_SHAFT_RATIO; // in rotation\n\nconst STEPPER_STEP_PER_ROTATION = 400; // based on dip switch on driver\nvar stepper_step_amount = motor_rotation * STEPPER_STEP_PER_ROTATION;\n\n//-- Pulse_width\npulse_width_i = Math.round(inhale_time/stepper_step_amount);\nstepper_step_amount = Math.round(stepper_step_amount);\n\n//-- Payload assignment\nmsg.pulse_width = pulse_width_i;\nmsg.step_count = stepper_step_amount;\nmsg.rr = rr;\nmsg.ie = ie;\nmsg.vti = vol;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 180,
        "y": 460,
        "wires": [
            [
                "5333e6e1.f3d708",
                "e50eeca4.82d9e",
                "f2ccc686.110628",
                "c125dd1d.bcc5d",
                "8a051b1.934bce8"
            ]
        ]
    },
    {
        "id": "f0fdd752.c5d718",
        "type": "switch",
        "z": "dea9ee4a.091b4",
        "name": "check_breathing_status",
        "property": "breathing_phase",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "boc",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 230,
        "y": 860,
        "wires": [
            [
                "c79ed7cf.d973e8"
            ],
            [
                "e40ea5a6.f76ec8"
            ]
        ]
    },
    {
        "id": "c79ed7cf.d973e8",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "cekFighting",
        "func": "// Kondisi sekarang\nvar peak_count = flow.get(\"peak_count\");\nvar peak_val = flow.get(\"peak_val_f\");\n\nvar stat = \"03_OFF\";\nvar pres_val = msg.payload;\n\nif(pres_val > peak_val){\n    peak_val += pres_val;\n    flow.set(\"peak_val_f\", peak_val);\n} else {\n    if(peak_val - pres_val >= 2.5){\n        peak_count += 1;\n        flow.set(\"peak_count\", peak_count);\n        peak_val = 0;\n        flow.set(\"peak_val_f\", peak_val)\n    }\n}\n\nif (peak_count > 2){\n    flow.set(\"peak_count\",0);\n    stat = \"03_ON\";\n}\nnewmsg = {payload: \"\"};\nnewmsg.payload = stat;\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 450,
        "y": 860,
        "wires": [
            [
                "e7fe6470.448a98"
            ]
        ]
    },
    {
        "id": "e40ea5a6.f76ec8",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "reset_peaks",
        "rules": [
            {
                "t": "set",
                "p": "peak_count",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "peak_val_f",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "peak_val",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "5333e6e1.f3d708",
        "type": "function",
        "z": "811eb35.554d75",
        "name": "sendPulse",
        "func": "msg.topic = \"root/stepper/pulse_width\";\nmsg.payload = msg.pulse_width;\n// msg.payload = 1000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 500,
        "wires": [
            [
                "7aec1b97.6f0aa4"
            ]
        ]
    },
    {
        "id": "e50eeca4.82d9e",
        "type": "function",
        "z": "811eb35.554d75",
        "name": "sendStepCount",
        "func": "msg.topic = \"root/stepper/step_count_set\";\nmsg.payload = msg.step_count;\n// msg.payload = 500;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 660,
        "wires": [
            [
                "7aec1b97.6f0aa4",
                "5467fe45.0df29"
            ]
        ]
    },
    {
        "id": "1c39e554.ed2e7b",
        "type": "change",
        "z": "811eb35.554d75",
        "d": true,
        "name": "send Mode",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "root/stepper/mode",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "modemandatory",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 780,
        "wires": [
            [
                "7aec1b97.6f0aa4"
            ]
        ]
    },
    {
        "id": "aeefd2b0.025fb",
        "type": "change",
        "z": "811eb35.554d75",
        "name": "send Enable",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "root/stepper/ena",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 740,
        "wires": [
            [
                "1c39e554.ed2e7b",
                "7aec1b97.6f0aa4",
                "b262e001.0aaaa"
            ]
        ]
    },
    {
        "id": "59f229d6.ee9ca8",
        "type": "change",
        "z": "811eb35.554d75",
        "name": "End of Cycle stop",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "mode_on_off",
                "pt": "global",
                "to": "0",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 1060,
        "wires": [
            [
                "cbaf3b7.36d9cc8"
            ]
        ]
    },
    {
        "id": "c0b271f8.ad843",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 340,
        "y": 480,
        "wires": [
            [
                "3210f530.79054a"
            ]
        ]
    },
    {
        "id": "3210f530.79054a",
        "type": "exec",
        "z": "55d0620b.dc73dc",
        "command": "python",
        "addpay": false,
        "append": "-u /tmp/test.py",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 490,
        "y": 480,
        "wires": [
            [
                "1af0d1d1.8967de"
            ],
            [],
            []
        ]
    },
    {
        "id": "1af0d1d1.8967de",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 660,
        "y": 480,
        "wires": []
    },
    {
        "id": "950306ec.ba8f58",
        "type": "mqtt in",
        "z": "dea9ee4a.091b4",
        "d": true,
        "name": "",
        "topic": "root/stepper/br_phase",
        "qos": "2",
        "datatype": "auto",
        "broker": "913f80b.7920f8",
        "x": 820,
        "y": 100,
        "wires": [
            [
                "c85dbcde.22e18"
            ]
        ]
    },
    {
        "id": "5dce6d1b.882164",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Find PIP,IPP,PEEP",
        "info": "",
        "x": 130,
        "y": 940,
        "wires": []
    },
    {
        "id": "c85dbcde.22e18",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "breathing_phase",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "breathing_phase",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 100,
        "wires": [
            [
                "7990cbd8.8d10f4",
                "afa43b6c.6cf318"
            ]
        ]
    },
    {
        "id": "7990cbd8.8d10f4",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug breathingPhase1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1330,
        "y": 160,
        "wires": []
    },
    {
        "id": "f2ccc686.110628",
        "type": "change",
        "z": "811eb35.554d75",
        "name": "send RR",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "root/stepper/rr",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "rr",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 540,
        "wires": [
            [
                "7aec1b97.6f0aa4"
            ]
        ]
    },
    {
        "id": "c9c8ffc7.db24b",
        "type": "mqtt in",
        "z": "811eb35.554d75",
        "d": true,
        "name": "",
        "topic": "root/stepper/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "913f80b.7920f8",
        "x": 150,
        "y": 220,
        "wires": [
            [
                "ea0fe1f6.38887"
            ]
        ]
    },
    {
        "id": "ea0fe1f6.38887",
        "type": "debug",
        "z": "811eb35.554d75",
        "d": true,
        "name": "debug stepper_driver.py",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 230,
        "y": 280,
        "wires": []
    },
    {
        "id": "a3917301.09686",
        "type": "serial in",
        "z": "927d9689.f973b8",
        "d": true,
        "name": "mpx5010",
        "serial": "85fb4f9c.e9739",
        "x": 180,
        "y": 580,
        "wires": [
            [
                "b78639a7.bbfa18"
            ]
        ]
    },
    {
        "id": "4940b10.c41b35",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "to pressure graph",
        "links": [
            "4a1fa4ed.8ed21c"
        ],
        "x": 275,
        "y": 580,
        "wires": [
            [
                "569bf189.12a8d"
            ]
        ]
    },
    {
        "id": "ddf371a1.74b9b",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug bit2pres",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 460,
        "y": 740,
        "wires": []
    },
    {
        "id": "3352e1ad.ee778e",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "to updateDashPIP,IPP,PEEP",
        "links": [
            "41d85bab.453d44",
            "e8cc7e57.e4712"
        ],
        "x": 215,
        "y": 3240,
        "wires": [
            [
                "34bbe0fe.f9d8e",
                "133afdd.01a5a02",
                "641118f5.584448"
            ]
        ]
    },
    {
        "id": "8e11e07.fd1a72",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "toDashO2",
        "links": [
            "c69da0e5.62a6a"
        ],
        "x": 215,
        "y": 3500,
        "wires": [
            [
                "4a56430d.252f6c"
            ]
        ]
    },
    {
        "id": "d677cad9.baabe8",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "from bt Apply pg1",
        "links": [
            "ccca6409.7348f8",
            "c491c224.5dc58"
        ],
        "x": 1155,
        "y": 1780,
        "wires": []
    },
    {
        "id": "1e532d90.0f27c2",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "findPIP",
        "func": "var pres_now = parseFloat(msg.payload);\nvar pip_now = global.get(\"pip_val\");\n\nif (pres_now > pip_now) {\n    pip_now = pres_now;\n}\n\nmsg.payload = pip_now;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 180,
        "y": 980,
        "wires": [
            [
                "91bd9d36.309c7"
            ]
        ]
    },
    {
        "id": "91bd9d36.309c7",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pip_val",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "pip_val",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "br_p",
                "pt": "msg",
                "to": "breathing_phase",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "ee53cec3.8c1f8",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "to findIPP v2",
        "links": [
            "4a1fa4ed.8ed21c"
        ],
        "x": 75,
        "y": 980,
        "wires": [
            [
                "1e532d90.0f27c2"
            ]
        ]
    },
    {
        "id": "9eef4fc2.6358a",
        "type": "switch",
        "z": "dea9ee4a.091b4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "eoc",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "eoi",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 170,
        "y": 1040,
        "wires": [
            [
                "9c12352.17510c8",
                "b8c699d.35ccd68"
            ],
            [
                "98772ff8.7f5bb"
            ]
        ]
    },
    {
        "id": "41d85bab.453d44",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from BreathingPhase eoc",
        "links": [
            "3352e1ad.ee778e"
        ],
        "x": 475,
        "y": 1020,
        "wires": []
    },
    {
        "id": "34bbe0fe.f9d8e",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "pip_val",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 3260,
        "wires": [
            [
                "33dcb3b7.de634c",
                "7815099b.ceda18"
            ]
        ]
    },
    {
        "id": "33dcb3b7.de634c",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pip_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "133afdd.01a5a02",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ipp_val",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 3360,
        "wires": [
            [
                "83c4498f.d0bb18"
            ]
        ]
    },
    {
        "id": "641118f5.584448",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "peep_val",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 3420,
        "wires": [
            [
                "cb94c53a.58e598"
            ]
        ]
    },
    {
        "id": "3926d53d.28079a",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pres_val",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "98772ff8.7f5bb",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ipp_val",
                "pt": "global",
                "to": "pres_val",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "9c12352.17510c8",
        "type": "change",
        "z": "dea9ee4a.091b4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "peep_val",
                "pt": "global",
                "to": "pres_val",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "a4e6dc6a.fc495",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "pressure data generator",
        "info": "",
        "x": 100,
        "y": 1060,
        "wires": []
    },
    {
        "id": "63cc357.3098dcc",
        "type": "inject",
        "z": "927d9689.f973b8",
        "d": true,
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 90,
        "y": 1100,
        "wires": [
            [
                "de9670f8.b9e6e"
            ]
        ]
    },
    {
        "id": "de9670f8.b9e6e",
        "type": "trigger",
        "z": "927d9689.f973b8",
        "d": true,
        "op1": "true",
        "op2": "0",
        "op1type": "bool",
        "op2type": "str",
        "duration": "-70",
        "extend": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 270,
        "y": 1100,
        "wires": [
            [
                "43c4ea85.0261f4"
            ]
        ]
    },
    {
        "id": "827576b6.3cdd78",
        "type": "mqtt out",
        "z": "927d9689.f973b8",
        "d": true,
        "name": "",
        "topic": "raw_pressure_val",
        "qos": "",
        "retain": "",
        "broker": "913f80b.7920f8",
        "x": 650,
        "y": 1100,
        "wires": []
    },
    {
        "id": "43c4ea85.0261f4",
        "type": "random",
        "z": "927d9689.f973b8",
        "d": true,
        "name": "",
        "low": "0.72",
        "high": "0.78",
        "inte": "false",
        "property": "payload",
        "x": 460,
        "y": 1100,
        "wires": [
            [
                "827576b6.3cdd78"
            ]
        ]
    },
    {
        "id": "2eb8ee22.6c1052",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "from mqttPressure, to calcBit2Pres",
        "links": [
            "6fcced42.5b3654"
        ],
        "x": 135,
        "y": 780,
        "wires": [
            [
                "5416e29a.b5ec5c"
            ]
        ]
    },
    {
        "id": "7815099b.ceda18",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 3260,
        "wires": [
            [
                "698b027e.e4120c"
            ],
            [
                "55dc2e84.7431b",
                "36249556.6feb3a"
            ]
        ]
    },
    {
        "id": "698b027e.e4120c",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 3240,
        "wires": [
            [
                "55dc2e84.7431b",
                "36249556.6feb3a"
            ]
        ]
    },
    {
        "id": "2de55679.c8c53a",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 3340,
        "wires": [
            [
                "a17c1ccc.d97b1"
            ]
        ]
    },
    {
        "id": "83c4498f.d0bb18",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 3360,
        "wires": [
            [
                "2de55679.c8c53a"
            ],
            [
                "a17c1ccc.d97b1"
            ]
        ]
    },
    {
        "id": "d5429af6.f261c8",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "-",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 3400,
        "wires": [
            [
                "6d1dfb34.0e4804"
            ]
        ]
    },
    {
        "id": "cb94c53a.58e598",
        "type": "switch",
        "z": "c234feb0.ef673",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "-1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 3420,
        "wires": [
            [
                "d5429af6.f261c8"
            ],
            [
                "6d1dfb34.0e4804"
            ]
        ]
    },
    {
        "id": "2062427e.47c38e",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "to changeParameterOTG",
        "links": [
            "fd6af82d.3aaa38",
            "43aeaf3f.ec01f"
        ],
        "x": 75,
        "y": 1140,
        "wires": [
            [
                "7a7dfee6.4255b",
                "614402f2.10a54c"
            ]
        ]
    },
    {
        "id": "7edde948.2b9d68",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "WIP, by Pras ==============================================================================",
        "info": "",
        "x": 390,
        "y": 580,
        "wires": []
    },
    {
        "id": "bccb111.ebf6bf",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "send_mqtt()",
        "func": "ena = {topic: null, payload: null};\ndir = {topic: null, payload: null};\npul = {topic: null, payload: null};\n\nena.payload = msg.ena || flow.get(\"ena\");\nena.topic = \"root/stepper/ena\";\nflow.set(\"ena\", ena.payload);\n\ndir.payload = msg.dir || flow.get(\"dir\");\ndir.topic = \"root/stepper/dir\";\nflow.set(\"dir\", dir.payload);\n\npul.payload = msg.pul || flow.get(\"pul\");\npul.topic = \"root/stepper/pul\";\nflow.set(\"pul\", pul.payload);\n\nreturn [ena,dir,pul];",
        "outputs": 3,
        "noerr": 0,
        "x": 590,
        "y": 700,
        "wires": [
            [
                "a0369faa.afc44"
            ],
            [
                "730aefb2.6e1ec"
            ],
            [
                "1c1a4b9f.3089b4"
            ]
        ]
    },
    {
        "id": "a0369faa.afc44",
        "type": "rbe",
        "z": "55d0620b.dc73dc",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 730,
        "y": 660,
        "wires": [
            [
                "767e7433.6750ac"
            ]
        ]
    },
    {
        "id": "730aefb2.6e1ec",
        "type": "rbe",
        "z": "55d0620b.dc73dc",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 730,
        "y": 700,
        "wires": [
            [
                "767e7433.6750ac"
            ]
        ]
    },
    {
        "id": "1c1a4b9f.3089b4",
        "type": "rbe",
        "z": "55d0620b.dc73dc",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 730,
        "y": 740,
        "wires": [
            [
                "767e7433.6750ac"
            ]
        ]
    },
    {
        "id": "767e7433.6750ac",
        "type": "mqtt out",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "913f80b.7920f8",
        "x": 860,
        "y": 700,
        "wires": []
    },
    {
        "id": "c3335152.eb845",
        "type": "link in",
        "z": "55d0620b.dc73dc",
        "name": "[com] send_mqtt()",
        "links": [],
        "x": 475,
        "y": 700,
        "wires": [
            [
                "bccb111.ebf6bf"
            ]
        ]
    },
    {
        "id": "baa05420.1fb778",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Input: msg.ena, msg.dir, msg.pul",
        "info": "Input: msg.ena, msg.dir, msg.pul",
        "x": 590,
        "y": 620,
        "wires": []
    },
    {
        "id": "b9752982.12ab28",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "init",
        "func": "flow.set(\"ena\",0);\nflow.set(\"dir\",0);\nflow.set(\"pul\",0);\n\nflow.set(\"dir_inhale\",1);\n\nflow.set(\"stat_inhale\",false);\nflow.set(\"stat_exhale\",false);\nflow.set(\"stat_breath\",false);",
        "outputs": 1,
        "noerr": 0,
        "x": 790,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "93a3416.d5565c",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 670,
        "y": 820,
        "wires": [
            [
                "b9752982.12ab28"
            ]
        ]
    },
    {
        "id": "2462b729.378278",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "Inhale",
        "func": "newmsg = {ena: null, dir: null, pul:null, inhale: true};\n\n\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 920,
        "wires": [
            [
                "e2135f9e.b580a"
            ]
        ]
    },
    {
        "id": "5b8614ec.a6dc8c",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "exhale",
        "func": "newmsg = {ena: null, dir: null, pul:null, inhale: true};\n\n\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 980,
        "wires": [
            [
                "e963471a.bf6268"
            ]
        ]
    },
    {
        "id": "95295e50.03808",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "Breath",
        "func": "newmsg = {ena: null, dir: null, pul:null, inhale: true};\n\n\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 150,
        "y": 820,
        "wires": [
            [
                "8b742fee.f09d4"
            ]
        ]
    },
    {
        "id": "23d84c7b.e68d54",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "Stop",
        "func": "newmsg = {ena: null, dir: null, pul:null, inhale: true};\n\n\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "cf6db6cf.b39448",
        "type": "link in",
        "z": "55d0620b.dc73dc",
        "name": "[breath] start of breath",
        "links": [],
        "x": 55,
        "y": 820,
        "wires": [
            [
                "95295e50.03808"
            ]
        ]
    },
    {
        "id": "b5413eb4.34239",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[breath] end of breath",
        "links": [],
        "x": 535,
        "y": 1020,
        "wires": []
    },
    {
        "id": "6b81f023.ef08d",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 160,
        "y": 1100,
        "wires": [
            [
                "ecbbd265.0a2b4"
            ]
        ]
    },
    {
        "id": "ecbbd265.0a2b4",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "",
        "func": "msg.payload = process.hrtime();\n// var hrTime = process.hrtime()\n// console.log(hrTime[0] * 1000000 + hrTime[1] / 1000)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 270,
        "y": 1200,
        "wires": [
            [
                "1286d52c.66e2bb"
            ]
        ]
    },
    {
        "id": "1286d52c.66e2bb",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 400,
        "y": 1100,
        "wires": []
    },
    {
        "id": "961eb0d0.b1725",
        "type": "serial out",
        "z": "55d0620b.dc73dc",
        "name": "Serial_Nano_write",
        "serial": "85fb4f9c.e9739",
        "x": 1370,
        "y": 120,
        "wires": []
    },
    {
        "id": "3215e96d.e98806",
        "type": "serial in",
        "z": "55d0620b.dc73dc",
        "d": true,
        "name": "Serial_Nano",
        "serial": "85fb4f9c.e9739",
        "x": 1090,
        "y": 80,
        "wires": [
            [
                "5e531df5.51d964"
            ]
        ]
    },
    {
        "id": "5e531df5.51d964",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "Serial_Nano_output",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1380,
        "y": 80,
        "wires": []
    },
    {
        "id": "11c812fc.0bd88d",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "USB-UART Read/Write Arduino Nano ",
        "info": "",
        "x": 1150,
        "y": 40,
        "wires": []
    },
    {
        "id": "c125dd1d.bcc5d",
        "type": "change",
        "z": "811eb35.554d75",
        "name": "send IE",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ie",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "root/stepper/ie",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 580,
        "wires": [
            [
                "7aec1b97.6f0aa4"
            ]
        ]
    },
    {
        "id": "8a051b1.934bce8",
        "type": "change",
        "z": "811eb35.554d75",
        "name": "send Vti",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "vti",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "root/stepper/vti",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 620,
        "wires": [
            [
                "7aec1b97.6f0aa4"
            ]
        ]
    },
    {
        "id": "7aec1b97.6f0aa4",
        "type": "link out",
        "z": "811eb35.554d75",
        "name": "from setStepCount",
        "links": [
            "1ceff184.3b609e",
            "232f672a.063fa8"
        ],
        "x": 375,
        "y": 460,
        "wires": []
    },
    {
        "id": "cbaf3b7.36d9cc8",
        "type": "link out",
        "z": "811eb35.554d75",
        "name": "from stopCommand",
        "links": [
            "245b4152.6de98e"
        ],
        "x": 535,
        "y": 1060,
        "wires": []
    },
    {
        "id": "5467fe45.0df29",
        "type": "switch",
        "z": "811eb35.554d75",
        "name": "is fromSetValue",
        "property": "fromSetValue",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 220,
        "y": 700,
        "wires": [
            [],
            [
                "aeefd2b0.025fb"
            ]
        ]
    },
    {
        "id": "d8f5db00.78ff38",
        "type": "change",
        "z": "811eb35.554d75",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "mode_on_off",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 980,
        "wires": [
            [
                "6b22972f.adc3a8"
            ]
        ]
    },
    {
        "id": "245b4152.6de98e",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "to setStepCount",
        "links": [
            "6b22972f.adc3a8",
            "614402f2.10a54c",
            "cbaf3b7.36d9cc8"
        ],
        "x": 55,
        "y": 380,
        "wires": [
            [
                "d0b399e2.a73268",
                "eedaf936.6613e8"
            ]
        ]
    },
    {
        "id": "6b22972f.adc3a8",
        "type": "link out",
        "z": "811eb35.554d75",
        "name": "from commandStart",
        "links": [
            "245b4152.6de98e"
        ],
        "x": 535,
        "y": 980,
        "wires": []
    },
    {
        "id": "6381045a.8e69fc",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "Set stepper-raspi param",
        "info": "",
        "x": 180,
        "y": 420,
        "wires": []
    },
    {
        "id": "7a7dfee6.4255b",
        "type": "change",
        "z": "811eb35.554d75",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "fromSetValue",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 1180,
        "wires": [
            [
                "614402f2.10a54c"
            ]
        ]
    },
    {
        "id": "614402f2.10a54c",
        "type": "link out",
        "z": "811eb35.554d75",
        "name": "from setValue2",
        "links": [
            "245b4152.6de98e"
        ],
        "x": 375,
        "y": 1140,
        "wires": []
    },
    {
        "id": "4b5188a1.85a0d8",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "bt next set value",
        "info": "",
        "x": 100,
        "y": 1100,
        "wires": []
    },
    {
        "id": "569bf189.12a8d",
        "type": "influxdb out",
        "z": "927d9689.f973b8",
        "influxdb": "a27e7919.2f3458",
        "name": "",
        "measurement": "pressure",
        "precision": "",
        "retentionPolicy": "",
        "x": 700,
        "y": 620,
        "wires": []
    },
    {
        "id": "e2135f9e.b580a",
        "type": "while-loop",
        "z": "55d0620b.dc73dc",
        "name": "",
        "condi": "flow.stat_inhale",
        "x": 240,
        "y": 960,
        "wires": [
            [
                "5b8614ec.a6dc8c"
            ],
            [
                "2462b729.378278"
            ]
        ]
    },
    {
        "id": "e963471a.bf6268",
        "type": "while-loop",
        "z": "55d0620b.dc73dc",
        "name": "",
        "condi": "flow.stat_exhale",
        "x": 420,
        "y": 1020,
        "wires": [
            [
                "b5413eb4.34239"
            ],
            [
                "5b8614ec.a6dc8c"
            ]
        ]
    },
    {
        "id": "8b742fee.f09d4",
        "type": "while-loop",
        "z": "55d0620b.dc73dc",
        "name": "",
        "condi": "flow.stat_breath",
        "x": 220,
        "y": 860,
        "wires": [
            [
                "23d84c7b.e68d54"
            ],
            [
                "2462b729.378278"
            ]
        ]
    },
    {
        "id": "e690334.e651ed",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[adc] Ox",
        "links": [
            "5531f708.fdf1e8"
        ],
        "x": 2155,
        "y": 280,
        "wires": []
    },
    {
        "id": "d252c928.860918",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[adc] Pressure",
        "links": [
            "d0af1304.b39d1"
        ],
        "x": 2155,
        "y": 360,
        "wires": []
    },
    {
        "id": "4f5d0127.7ded2",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[adc] Flow",
        "links": [
            "1b71d43.861ce2c"
        ],
        "x": 2155,
        "y": 320,
        "wires": []
    },
    {
        "id": "e3be08fd.7f5eb8",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "debug I2C",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1870,
        "y": 340,
        "wires": []
    },
    {
        "id": "fdff03d5.4206e",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "3",
        "x": 1070,
        "y": 260,
        "wires": [
            [
                "17a266b8.499059"
            ]
        ]
    },
    {
        "id": "17a266b8.499059",
        "type": "trigger",
        "z": "55d0620b.dc73dc",
        "d": true,
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-800",
        "extend": false,
        "units": "ms",
        "reset": "0",
        "bytopic": "all",
        "name": "",
        "x": 1580,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "4798155c.42720c",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1070,
        "y": 320,
        "wires": [
            [
                "17a266b8.499059"
            ]
        ]
    },
    {
        "id": "cbc27d38.248b2",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "d": true,
        "name": "getI2CPayload",
        "func": "var obj = msg.payload;\n\nvar key = Object.keys(obj)[0];\nvar value = obj[Object.keys(obj)[0]];\n\nmsg.payload = value;\n\nif (key.indexOf(\"A0\") != -1) {msg.topic = \"oxygen\";}\nelse if (key.indexOf(\"A2\") != -1) {msg.topic = \"flow\";}\nelse if (key.indexOf(\"A3\") != -1) {msg.topic = \"pressure\";}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1840,
        "y": 300,
        "wires": [
            [
                "e3be08fd.7f5eb8",
                "f7da5ef7.0906a"
            ]
        ]
    },
    {
        "id": "f7da5ef7.0906a",
        "type": "switch",
        "z": "55d0620b.dc73dc",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "oxygen",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "flow",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "pressure",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 2030,
        "y": 300,
        "wires": [
            [
                "e690334.e651ed"
            ],
            [
                "4f5d0127.7ded2"
            ],
            [
                "d252c928.860918"
            ]
        ]
    },
    {
        "id": "215adc3b.6468b4",
        "type": "link in",
        "z": "55d0620b.dc73dc",
        "name": "to startSensorSampling",
        "links": [
            "43aeaf3f.ec01f"
        ],
        "x": 1155,
        "y": 300,
        "wires": [
            [
                "d31a938d.76d3c"
            ]
        ]
    },
    {
        "id": "c491c224.5dc58",
        "type": "link in",
        "z": "55d0620b.dc73dc",
        "name": "to stopSamplingSensor",
        "links": [
            "d677cad9.baabe8"
        ],
        "x": 1155,
        "y": 260,
        "wires": [
            [
                "d12fac69.f8519"
            ]
        ]
    },
    {
        "id": "d12fac69.f8519",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 260,
        "wires": [
            [
                "17a266b8.499059"
            ]
        ]
    },
    {
        "id": "d31a938d.76d3c",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pip_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "ipp_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "peep_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 300,
        "wires": [
            [
                "17a266b8.499059",
                "c0ab6985.7c0328"
            ]
        ]
    },
    {
        "id": "c0ab6985.7c0328",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "from startSamplingSensor",
        "links": [],
        "x": 1435,
        "y": 300,
        "wires": []
    },
    {
        "id": "5d63069e.4887e8",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Sensor Sampling",
        "info": "",
        "x": 1100,
        "y": 220,
        "wires": [],
        "icon": "font-awesome/fa-wrench"
    },
    {
        "id": "34365754.56f2f8",
        "type": "influxdb out",
        "z": "927d9689.f973b8",
        "influxdb": "a27e7919.2f3458",
        "name": "",
        "measurement": "flowrate",
        "precision": "",
        "retentionPolicy": "",
        "x": 700,
        "y": 700,
        "wires": []
    },
    {
        "id": "8bf4f399.f6304",
        "type": "influxdb out",
        "z": "927d9689.f973b8",
        "influxdb": "a27e7919.2f3458",
        "name": "",
        "measurement": "volume",
        "precision": "",
        "retentionPolicy": "",
        "x": 700,
        "y": 660,
        "wires": []
    },
    {
        "id": "3a5e2c06.330064",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "30",
        "x": 110,
        "y": 660,
        "wires": [
            [
                "1e356013.ffe3b"
            ]
        ]
    },
    {
        "id": "1e356013.ffe3b",
        "type": "random",
        "z": "927d9689.f973b8",
        "name": "",
        "low": "1",
        "high": "600",
        "inte": "true",
        "property": "payload",
        "x": 240,
        "y": 660,
        "wires": [
            [
                "5f9118f8.94fc88"
            ]
        ]
    },
    {
        "id": "5f9118f8.94fc88",
        "type": "smooth",
        "z": "927d9689.f973b8",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "2",
        "round": "1",
        "mult": "single",
        "reduce": false,
        "x": 400,
        "y": 660,
        "wires": [
            [
                "8bf4f399.f6304"
            ]
        ]
    },
    {
        "id": "d5a0f928.33a118",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "30",
        "x": 110,
        "y": 700,
        "wires": [
            [
                "c424e09c.6663f"
            ]
        ]
    },
    {
        "id": "c424e09c.6663f",
        "type": "random",
        "z": "927d9689.f973b8",
        "name": "",
        "low": "-40",
        "high": "70",
        "inte": "true",
        "property": "payload",
        "x": 240,
        "y": 700,
        "wires": [
            [
                "e808f3aa.326da"
            ]
        ]
    },
    {
        "id": "e808f3aa.326da",
        "type": "smooth",
        "z": "927d9689.f973b8",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "2",
        "round": "1",
        "mult": "single",
        "reduce": false,
        "x": 400,
        "y": 700,
        "wires": [
            [
                "34365754.56f2f8"
            ]
        ]
    },
    {
        "id": "74f27c07.2f63f4",
        "type": "serial in",
        "z": "811eb35.554d75",
        "name": "Serial_Nano",
        "serial": "85fb4f9c.e9739",
        "x": 610,
        "y": 100,
        "wires": [
            [
                "fe025649.e5e418",
                "2d5a37a9.06bcc8"
            ]
        ]
    },
    {
        "id": "fe025649.e5e418",
        "type": "debug",
        "z": "811eb35.554d75",
        "name": "from serial_nano",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 830,
        "y": 100,
        "wires": []
    },
    {
        "id": "7703bffc.709e2",
        "type": "serial out",
        "z": "811eb35.554d75",
        "name": "Serial_Nano_write",
        "serial": "85fb4f9c.e9739",
        "x": 690,
        "y": 180,
        "wires": []
    },
    {
        "id": "e54632d8.a9f9b",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "[Servo-Nano] USB-UART Read/Write Arduino Nano ",
        "info": "",
        "x": 710,
        "y": 60,
        "wires": []
    },
    {
        "id": "cf279ae9.980bc8",
        "type": "link in",
        "z": "811eb35.554d75",
        "name": "to NanoWrite",
        "links": [
            "df3fdb95.7130e8"
        ],
        "x": 555,
        "y": 180,
        "wires": [
            [
                "7703bffc.709e2",
                "b3d90eaf.ee5b4"
            ]
        ]
    },
    {
        "id": "eedaf936.6613e8",
        "type": "function",
        "z": "811eb35.554d75",
        "name": "msgToNano",
        "func": "var mode_on_off = global.get(\"mode_on_off\");\nvar mode_breathing = global.get(\"modemandatory\");\nif (mode_breathing) {mode_breathing = 1;}\nelse {mode_breathing = 2}\n\nif (mode_on_off != 1) {\n    mode_breathing = 0;\n}\n\nvar vti = global.get(\"set_vol\");\nvar rr = global.get(\"set_rr\");\nvar ie = global.get(\"set_ie\");\n\nmsg.payload = '<' + mode_breathing + ',' + vti + ',' + rr + ',' + ie + '>';\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 610,
        "y": 460,
        "wires": [
            [
                "df3fdb95.7130e8"
            ]
        ]
    },
    {
        "id": "df3fdb95.7130e8",
        "type": "link out",
        "z": "811eb35.554d75",
        "name": "from servo-nano setparam",
        "links": [
            "cf279ae9.980bc8"
        ],
        "x": 735,
        "y": 460,
        "wires": []
    },
    {
        "id": "a26c94f3.6e0428",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "load data for calculation, by BWE ------------------------------------------------",
        "info": "",
        "x": 1290,
        "y": 440,
        "wires": []
    },
    {
        "id": "97a2e438.654758",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "set_ie",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "12337a50.e7ed16",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "set_rr",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "40557b8c.48f8f4",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "set_o2",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "cc3cc93c.e986e8",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "set_peep",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "2cefc741.df7818",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "set_vol",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "69f75312.de62bc",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "hiplimit",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "c4847303.75071",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "loplimit",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "89523648.b92f68",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "o2tol",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "206c80dc.555a3",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "modemandatory",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "e96ad080.befa3",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "get mode param (modemandatory true/false)",
        "info": "",
        "x": 1210,
        "y": 500,
        "wires": []
    },
    {
        "id": "d218789.4245488",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "get breathing param (ie, rr, o2, peep, vol)",
        "info": "",
        "x": 1200,
        "y": 580,
        "wires": []
    },
    {
        "id": "3b7c1fbf.32f9",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "get alarm param (hi p limit, lo p limit, o2 tolerance)",
        "info": "",
        "x": 1220,
        "y": 840,
        "wires": []
    },
    {
        "id": "3d6b192c.918d06",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "Set servo-nano param",
        "info": "",
        "x": 620,
        "y": 420,
        "wires": []
    },
    {
        "id": "2d5a37a9.06bcc8",
        "type": "link out",
        "z": "811eb35.554d75",
        "name": "from NanoRead",
        "links": [
            "5974972c.1e45f8"
        ],
        "x": 735,
        "y": 140,
        "wires": []
    },
    {
        "id": "faab48a4.1f3cc8",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "Set actuator param",
        "info": "",
        "x": 110,
        "y": 340,
        "wires": []
    },
    {
        "id": "545d806f.92677",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "Actuator interface",
        "info": "",
        "x": 100,
        "y": 20,
        "wires": []
    },
    {
        "id": "152d0212.59fece",
        "type": "comment",
        "z": "811eb35.554d75",
        "name": "[Stepper-Raspi] MQTT to/from Python",
        "info": "",
        "x": 210,
        "y": 60,
        "wires": []
    },
    {
        "id": "ee5f4b06.3c0958",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "buttonstart",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 3740,
        "wires": [
            [
                "22c802d7.06fe1e",
                "61c4e70a.912638"
            ]
        ]
    },
    {
        "id": "e0fdcfe3.7325f",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from button stopper",
        "links": [
            "9352bfa7.258fe",
            "6a7965d9.13aeac",
            "b2bd6044.8d6ed",
            "3aa2d417.f1bdfc"
        ],
        "x": 295,
        "y": 3740,
        "wires": [
            [
                "ee5f4b06.3c0958"
            ]
        ]
    },
    {
        "id": "ca562a83.d727f8",
        "type": "comment",
        "z": "c234feb0.ef673",
        "name": "auto stop",
        "info": "",
        "x": 600,
        "y": 3700,
        "wires": []
    },
    {
        "id": "9352bfa7.258fe",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "stop the button",
        "links": [
            "e0fdcfe3.7325f"
        ],
        "x": 475,
        "y": 620,
        "wires": []
    },
    {
        "id": "6a7965d9.13aeac",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "stop the button",
        "links": [
            "e0fdcfe3.7325f"
        ],
        "x": 475,
        "y": 820,
        "wires": []
    },
    {
        "id": "b2bd6044.8d6ed",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "stop the button",
        "links": [
            "e0fdcfe3.7325f"
        ],
        "x": 475,
        "y": 1000,
        "wires": []
    },
    {
        "id": "3aa2d417.f1bdfc",
        "type": "link out",
        "z": "c234feb0.ef673",
        "name": "stop the button",
        "links": [
            "e0fdcfe3.7325f"
        ],
        "x": 475,
        "y": 1200,
        "wires": []
    },
    {
        "id": "d8501703.c03548",
        "type": "inject",
        "z": "c234feb0.ef673",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 350,
        "y": 3680,
        "wires": [
            [
                "ee5f4b06.3c0958"
            ]
        ]
    },
    {
        "id": "bf3dc839.c58ea8",
        "type": "link in",
        "z": "811eb35.554d75",
        "d": true,
        "name": "to stepperDriverPython",
        "links": [
            "a5830e1c.03e5f"
        ],
        "x": 155,
        "y": 100,
        "wires": [
            [
                "c27e64bf.aa0358"
            ]
        ]
    },
    {
        "id": "4c059b39.5cddb4",
        "type": "exec",
        "z": "dea9ee4a.091b4",
        "command": "python3 -u ~/ventilator/sampling_ads1115_v2.py",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 360,
        "y": 60,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "2506cc60.13e724",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "to adcSamplingPython",
        "links": [
            "956bf2ac.c999b",
            "a5830e1c.03e5f"
        ],
        "x": 135,
        "y": 60,
        "wires": [
            [
                "4c059b39.5cddb4"
            ]
        ]
    },
    {
        "id": "7f91fd5b.fd56e4",
        "type": "mosca in",
        "z": "927d9689.f973b8",
        "mqtt_port": 1883,
        "mqtt_ws_port": 8080,
        "name": "",
        "username": "",
        "password": "",
        "dburl": "",
        "x": 110,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "c7999375.773a3",
        "type": "inject",
        "z": "927d9689.f973b8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 100,
        "y": 1000,
        "wires": [
            [
                "3c5f5b09.7272c4"
            ]
        ]
    },
    {
        "id": "3c5f5b09.7272c4",
        "type": "exec",
        "z": "927d9689.f973b8",
        "command": "pkill python3",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 280,
        "y": 1000,
        "wires": [
            [
                "7545f118.54182"
            ],
            [
                "c2fe7a72.aea148"
            ],
            []
        ]
    },
    {
        "id": "c2fe7a72.aea148",
        "type": "debug",
        "z": "927d9689.f973b8",
        "name": "debug python initialization",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 510,
        "y": 1020,
        "wires": []
    },
    {
        "id": "7545f118.54182",
        "type": "delay",
        "z": "927d9689.f973b8",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 460,
        "y": 980,
        "wires": [
            [
                "a5830e1c.03e5f"
            ]
        ]
    },
    {
        "id": "232f672a.063fa8",
        "type": "link in",
        "z": "927d9689.f973b8",
        "name": "to publishMQTT",
        "links": [
            "7aec1b97.6f0aa4"
        ],
        "x": 295,
        "y": 900,
        "wires": [
            [
                "8b7889ba.98f0e8"
            ]
        ]
    },
    {
        "id": "8b7889ba.98f0e8",
        "type": "mqtt out",
        "z": "927d9689.f973b8",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "913f80b.7920f8",
        "x": 390,
        "y": 900,
        "wires": []
    },
    {
        "id": "a5830e1c.03e5f",
        "type": "link out",
        "z": "927d9689.f973b8",
        "name": "from pythonInit",
        "links": [
            "bf3dc839.c58ea8",
            "6a6a99f2.202d78",
            "2506cc60.13e724"
        ],
        "x": 575,
        "y": 980,
        "wires": []
    },
    {
        "id": "9312b19d.240e8",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "MQTT broker and publisher",
        "info": "",
        "x": 120,
        "y": 860,
        "wires": []
    },
    {
        "id": "1148e59c.112f3a",
        "type": "comment",
        "z": "927d9689.f973b8",
        "name": "Python initialization",
        "info": "",
        "x": 90,
        "y": 960,
        "wires": []
    },
    {
        "id": "2d7eb266.0b31be",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "breathing_phase",
        "payloadType": "global",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 220,
        "y": 1520,
        "wires": [
            [
                "8fe2321b.68f48"
            ]
        ]
    },
    {
        "id": "8fe2321b.68f48",
        "type": "switch",
        "z": "55d0620b.dc73dc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "inhale",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "exhale",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 410,
        "y": 1520,
        "wires": [
            [
                "f00a60a5.3d59"
            ],
            [
                "44a5e677.567018"
            ],
            [
                "6c55ffb2.87f04"
            ]
        ]
    },
    {
        "id": "f00a60a5.3d59",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "breathing_phase",
                "pt": "global",
                "to": "exhale",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 1480,
        "wires": [
            [
                "e579b0e5.00012"
            ]
        ]
    },
    {
        "id": "44a5e677.567018",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "breathing_phase",
                "pt": "global",
                "to": "idle",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 1520,
        "wires": [
            [
                "e579b0e5.00012"
            ]
        ]
    },
    {
        "id": "6c55ffb2.87f04",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "breathing_phase",
                "pt": "global",
                "to": "inhale",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 1560,
        "wires": [
            [
                "e579b0e5.00012"
            ]
        ]
    },
    {
        "id": "9cb17368.e64c2",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "init global vars",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 190,
        "y": 1420,
        "wires": [
            [
                "f0552401.734be8"
            ]
        ]
    },
    {
        "id": "f0552401.734be8",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "breathing_phase",
                "pt": "global",
                "to": "idle",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "offset_flow",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "offset_pressure",
                "pt": "global",
                "to": "0",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "vol_count",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1420,
        "wires": [
            [
                "e579b0e5.00012"
            ]
        ]
    },
    {
        "id": "675e6218.0ca7fc",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "debug breathingPhase2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 850,
        "y": 1420,
        "wires": []
    },
    {
        "id": "e579b0e5.00012",
        "type": "function",
        "z": "55d0620b.dc73dc",
        "name": "",
        "func": "msg.payload = global.get(\"breathing_phase\");\nvar phase = global.get(\"breathing_phase\");\nif (phase == 'inhale') {\n    global.set(\"pip_value\",0);\n    global.set(\"peak_value\",0);\n    global.set(\"peak_count\",0);\n} else if (phase == \"exhale\") {\n    global.set(\"vol_count\",0);\n} else {\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 1420,
        "wires": [
            [
                "675e6218.0ca7fc"
            ]
        ]
    },
    {
        "id": "c55e08bd.a89de8",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Simulate breathing phase",
        "info": "Inhale/exhale/idle",
        "x": 190,
        "y": 1380,
        "wires": []
    },
    {
        "id": "4b0200fb.2435f",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 170,
        "y": 1640,
        "wires": [
            [
                "42fd7799.ff7448"
            ]
        ]
    },
    {
        "id": "42fd7799.ff7448",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[sim] flow1",
        "links": [
            "67b63c2e.2c2f94",
            "8971adc6.fd3dc"
        ],
        "x": 255,
        "y": 1640,
        "wires": []
    },
    {
        "id": "bef15d6e.5d6c6",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Simulate Flow reading",
        "info": "",
        "x": 180,
        "y": 1600,
        "wires": []
    },
    {
        "id": "9cc31ec2.01d11",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "50",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 410,
        "y": 1640,
        "wires": [
            [
                "cb3e71d2.4d081"
            ]
        ]
    },
    {
        "id": "cb3e71d2.4d081",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[sim] pres1",
        "links": [
            "5964c537.79dcac",
            "b1c8636a.eb9be",
            "97d329f6.711ab8",
            "31f86b64.38f734"
        ],
        "x": 495,
        "y": 1640,
        "wires": []
    },
    {
        "id": "76279444.3f799c",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Simulate Pres reading",
        "info": "",
        "x": 420,
        "y": 1600,
        "wires": []
    },
    {
        "id": "8980ba69.a88218",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 170,
        "y": 1700,
        "wires": [
            [
                "27b561b0.fcab6e"
            ]
        ]
    },
    {
        "id": "27b561b0.fcab6e",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[sim] flow2",
        "links": [
            "67b63c2e.2c2f94",
            "e709ab4c.06cb78",
            "8971adc6.fd3dc"
        ],
        "x": 255,
        "y": 1700,
        "wires": []
    },
    {
        "id": "16d2e372.b80c8d",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 410,
        "y": 1700,
        "wires": [
            [
                "2799042e.d5a3ac"
            ]
        ]
    },
    {
        "id": "2799042e.d5a3ac",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[sim] pres2",
        "links": [
            "5964c537.79dcac",
            "b1c8636a.eb9be",
            "97d329f6.711ab8",
            "31f86b64.38f734"
        ],
        "x": 495,
        "y": 1700,
        "wires": []
    },
    {
        "id": "7e04929f.20d63c",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 650,
        "y": 1640,
        "wires": [
            [
                "9cf8838b.2d7b5"
            ]
        ]
    },
    {
        "id": "9cf8838b.2d7b5",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[sim] ox1",
        "links": [
            "f3aea60c.da7188"
        ],
        "x": 735,
        "y": 1640,
        "wires": []
    },
    {
        "id": "1488f7ed.d4a648",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "Simulate Ox reading",
        "info": "",
        "x": 650,
        "y": 1600,
        "wires": []
    },
    {
        "id": "9cb89629.f49448",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 650,
        "y": 1700,
        "wires": [
            [
                "b681f87d.ad3908"
            ]
        ]
    },
    {
        "id": "b681f87d.ad3908",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "[sim] ox2",
        "links": [
            "f3aea60c.da7188"
        ],
        "x": 735,
        "y": 1700,
        "wires": []
    },
    {
        "id": "582826e4.ca92d8",
        "type": "random",
        "z": "55d0620b.dc73dc",
        "name": "",
        "low": "1",
        "high": "20",
        "inte": "false",
        "property": "payload",
        "x": 340,
        "y": 1840,
        "wires": [
            [
                "1dad9be6.eab6d4"
            ]
        ]
    },
    {
        "id": "1dad9be6.eab6d4",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "from randomVal",
        "links": [],
        "x": 455,
        "y": 1840,
        "wires": []
    },
    {
        "id": "37c472e5.4c15ce",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "d": true,
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "0.5",
        "crontab": "",
        "once": true,
        "onceDelay": "0.005",
        "x": 190,
        "y": 1840,
        "wires": [
            [
                "582826e4.ca92d8"
            ]
        ]
    },
    {
        "id": "e6396398.bb05e",
        "type": "inject",
        "z": "55d0620b.dc73dc",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 190,
        "y": 1780,
        "wires": [
            [
                "17e7498d.1c7916"
            ]
        ]
    },
    {
        "id": "17e7498d.1c7916",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "start_count",
                "pt": "global",
                "to": "1",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "492a605e.5775f",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Count volume",
        "info": "",
        "x": 110,
        "y": 340,
        "wires": []
    },
    {
        "id": "4da326a8.de5b88",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "countVolume",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 290,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "7d479ec6.b845c",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "to countVolume",
        "links": [
            "b1c8dc4c.7ce1b"
        ],
        "x": 155,
        "y": 380,
        "wires": [
            [
                "4da326a8.de5b88"
            ]
        ]
    },
    {
        "id": "568dd4bc.491a8c",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 230,
        "y": 1240,
        "wires": [
            [
                "825b82eb.f7677"
            ]
        ]
    },
    {
        "id": "26c77141.4705be",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 230,
        "y": 1040,
        "wires": [
            [
                "38c187be.0a4b78"
            ]
        ]
    },
    {
        "id": "575da470.bf926c",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 230,
        "y": 860,
        "wires": [
            [
                "2a9aa268.52072e"
            ]
        ]
    },
    {
        "id": "bcf5e6f6.45c348",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 230,
        "y": 660,
        "wires": [
            [
                "656162ea.b0c2fc"
            ]
        ]
    },
    {
        "id": "18406676.2e57fa",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1170,
        "y": 660,
        "wires": [
            [
                "7de5a5c4.6909dc"
            ]
        ]
    },
    {
        "id": "32dbfa7f.9ec1a6",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1170,
        "y": 860,
        "wires": [
            [
                "4e8eb7eb.fce548"
            ]
        ]
    },
    {
        "id": "dbd1f7fa.16c238",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1170,
        "y": 1040,
        "wires": [
            [
                "c7a4c429.458d78"
            ]
        ]
    },
    {
        "id": "f5c00e39.9f2e",
        "type": "rbe",
        "z": "c234feb0.ef673",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1170,
        "y": 1240,
        "wires": [
            [
                "d19c3dbd.68bd4"
            ]
        ]
    },
    {
        "id": "61c4e70a.912638",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 3740,
        "wires": [
            [
                "53ab4803.5faa38"
            ]
        ]
    },
    {
        "id": "5a026646.6f9568",
        "type": "change",
        "z": "c234feb0.ef673",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 3780,
        "wires": [
            [
                "53ab4803.5faa38"
            ]
        ]
    },
    {
        "id": "88457fd3.10927",
        "type": "link in",
        "z": "c234feb0.ef673",
        "name": "from reset bt",
        "links": [
            "44282871.69d8d8"
        ],
        "x": 295,
        "y": 3780,
        "wires": [
            [
                "5a026646.6f9568"
            ]
        ]
    },
    {
        "id": "31f86b64.38f734",
        "type": "link in",
        "z": "55d0620b.dc73dc",
        "d": true,
        "name": "[check] Fighting",
        "links": [
            "db521787.1c55e8",
            "5b7c282.4b0aad8",
            "4a1fa4ed.8ed21c",
            "cb3e71d2.4d081",
            "2799042e.d5a3ac"
        ],
        "x": 135,
        "y": 2060,
        "wires": [
            [
                "d6b62282.65f85"
            ]
        ]
    },
    {
        "id": "d6b62282.65f85",
        "type": "switch",
        "z": "55d0620b.dc73dc",
        "name": "check_breathing_status",
        "property": "breathing_phase",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "boc",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 290,
        "y": 2060,
        "wires": [
            [
                "ff2d4230.c7c34"
            ],
            [
                "ff2d4230.c7c34"
            ]
        ]
    },
    {
        "id": "ff2d4230.c7c34",
        "type": "rbe",
        "z": "55d0620b.dc73dc",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 470,
        "y": 2060,
        "wires": [
            [
                "8566e35a.75c75"
            ]
        ]
    },
    {
        "id": "8566e35a.75c75",
        "type": "switch",
        "z": "55d0620b.dc73dc",
        "name": "check_PEEP/IPP",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "boc",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "eoi",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 630,
        "y": 2060,
        "wires": [
            [
                "61633436.efed7c"
            ],
            [
                "18b421fa.4a54ee"
            ],
            []
        ]
    },
    {
        "id": "61633436.efed7c",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "peep_val",
                "pt": "global",
                "to": "pres_val",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 2040,
        "wires": [
            [
                "cda0c969.221fc8"
            ]
        ]
    },
    {
        "id": "18b421fa.4a54ee",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ipp_val",
                "pt": "global",
                "to": "pres_val",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 2080,
        "wires": [
            [
                "cda0c969.221fc8"
            ]
        ]
    },
    {
        "id": "cda0c969.221fc8",
        "type": "link out",
        "z": "55d0620b.dc73dc",
        "name": "from find PEEP IPP",
        "links": [
            "ae15df76.3131b"
        ],
        "x": 975,
        "y": 2060,
        "wires": []
    },
    {
        "id": "d0f14f2b.33119",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "PEEP/PIP vPras",
        "info": "",
        "x": 140,
        "y": 2000,
        "wires": []
    },
    {
        "id": "e56319e4.8fde18",
        "type": "switch",
        "z": "55d0620b.dc73dc",
        "d": true,
        "name": "",
        "property": "breathing_phase",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "eoi",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "boe",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 170,
        "y": 2200,
        "wires": [
            [
                "953d749e.df63c8"
            ],
            [
                "d3050104.1a443"
            ],
            []
        ]
    },
    {
        "id": "953d749e.df63c8",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ipp_val",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "ipp_val",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "br_p",
                "pt": "msg",
                "to": "breathing_phase",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 2180,
        "wires": [
            [
                "bf66aff2.fe8bd"
            ]
        ]
    },
    {
        "id": "d3050104.1a443",
        "type": "change",
        "z": "55d0620b.dc73dc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "peep_val",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "peep_val",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "br_p",
                "pt": "msg",
                "to": "breathing_phase",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 2220,
        "wires": [
            [
                "bf66aff2.fe8bd"
            ]
        ]
    },
    {
        "id": "bf66aff2.fe8bd",
        "type": "debug",
        "z": "55d0620b.dc73dc",
        "name": "debug PIP,IPP,PEEP",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 580,
        "y": 2180,
        "wires": []
    },
    {
        "id": "e0566b18.8b9178",
        "type": "comment",
        "z": "55d0620b.dc73dc",
        "name": "PEEP/PIP vDimas1",
        "info": "",
        "x": 150,
        "y": 2140,
        "wires": []
    },
    {
        "id": "7597ada3.32d6d4",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "",
        "links": [
            "afa43b6c.6cf318"
        ],
        "x": 75,
        "y": 1040,
        "wires": [
            [
                "9eef4fc2.6358a"
            ]
        ]
    },
    {
        "id": "afa43b6c.6cf318",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from breathingPhase",
        "links": [
            "7597ada3.32d6d4"
        ],
        "x": 1235,
        "y": 120,
        "wires": []
    },
    {
        "id": "83274eb8.5ab5c",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Breathing phase flag",
        "info": "",
        "x": 770,
        "y": 20,
        "wires": []
    },
    {
        "id": "5974972c.1e45f8",
        "type": "link in",
        "z": "dea9ee4a.091b4",
        "name": "to breathingPhaseFlag_serial",
        "links": [
            "2d5a37a9.06bcc8"
        ],
        "x": 735,
        "y": 200,
        "wires": [
            [
                "9dfc3267.24e41"
            ]
        ]
    },
    {
        "id": "448e9e9b.83bce",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "MQTT interface",
        "info": "",
        "x": 780,
        "y": 60,
        "wires": []
    },
    {
        "id": "11ab769b.da7329",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "UART interface",
        "info": "",
        "x": 780,
        "y": 160,
        "wires": []
    },
    {
        "id": "b8c699d.35ccd68",
        "type": "delay",
        "z": "dea9ee4a.091b4",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 350,
        "y": 1020,
        "wires": [
            [
                "41d85bab.453d44"
            ]
        ]
    },
    {
        "id": "7ca2f7ad.3e9b88",
        "type": "comment",
        "z": "dea9ee4a.091b4",
        "name": "Sensor sampling",
        "info": "",
        "x": 100,
        "y": 20,
        "wires": []
    },
    {
        "id": "b262e001.0aaaa",
        "type": "function",
        "z": "811eb35.554d75",
        "name": "send Mode",
        "func": "mode_on_off = global.get(\"mode_on_off\");\nmode_breathing = global.get(\"modemandatory\");\nif (mode_breathing) {mode_breathing = 1;}\nelse {mode_breathing = 2}\n\nif (mode_on_off != 1) {\n    mode_breathing = 0;\n}\n\nmsg.topic = \"root/stepper/mode\";\nmsg.payload = mode_breathing;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 820,
        "wires": [
            [
                "7aec1b97.6f0aa4"
            ]
        ]
    },
    {
        "id": "b3d90eaf.ee5b4",
        "type": "debug",
        "z": "811eb35.554d75",
        "name": "to serial_nano",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 680,
        "y": 220,
        "wires": []
    },
    {
        "id": "9dfc3267.24e41",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "serial_nano parser",
        "func": "frNano = msg.payload;\nif (frNano.indexOf(\"{ec}\") != -1) {\n    msg.payload = \"eoc\";\n} else if (frNano.indexOf(\"{ei}\") != -1) {\n    msg.payload = \"eoi\";\n} else {msg.payload = \"\";}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 870,
        "y": 200,
        "wires": [
            [
                "f5b1df41.4b88e"
            ]
        ]
    },
    {
        "id": "36249556.6feb3a",
        "type": "debug",
        "z": "c234feb0.ef673",
        "name": "debug PIP value on dashboard",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1070,
        "y": 3180,
        "wires": []
    },
    {
        "id": "e603bc22.98864",
        "type": "change",
        "z": "927d9689.f973b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pip_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "ipp_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "peep_val",
                "pt": "global",
                "to": "-1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 240,
        "wires": [
            [
                "e8cc7e57.e4712"
            ]
        ]
    },
    {
        "id": "e8cc7e57.e4712",
        "type": "link out",
        "z": "927d9689.f973b8",
        "name": "from initialPIP,IPP,PEEP",
        "links": [
            "3352e1ad.ee778e"
        ],
        "x": 875,
        "y": 240,
        "wires": []
    },
    {
        "id": "f5b1df41.4b88e",
        "type": "rbe",
        "z": "dea9ee4a.091b4",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1050,
        "y": 200,
        "wires": [
            [
                "afa43b6c.6cf318",
                "7990cbd8.8d10f4"
            ]
        ]
    },
    {
        "id": "5104792f.b75598",
        "type": "mqtt in",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "root/adc/oxy_raw",
        "qos": "0",
        "datatype": "auto",
        "broker": "913f80b.7920f8",
        "x": 100,
        "y": 140,
        "wires": [
            [
                "f2857c2e.330fa"
            ]
        ]
    },
    {
        "id": "2e95d92d.763386",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from oxy_raw",
        "links": [
            "5531f708.fdf1e8"
        ],
        "x": 425,
        "y": 140,
        "wires": []
    },
    {
        "id": "cb021d69.5c033",
        "type": "debug",
        "z": "dea9ee4a.091b4",
        "name": "debug raw_adc",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 560,
        "y": 140,
        "wires": []
    },
    {
        "id": "f2857c2e.330fa",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "parseFloat",
        "func": "var text = msg.payload;\nmsg.topic = \"oxy_raw\";\nmsg.payload = parseFloat(text);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 140,
        "wires": [
            [
                "2e95d92d.763386",
                "cb021d69.5c033"
            ]
        ]
    },
    {
        "id": "4c37356d.e703bc",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "parseFloat",
        "func": "var text = msg.payload;\nmsg.payload = parseFloat(text);\nmsg.topic = \"flow_raw\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 180,
        "wires": [
            [
                "cfa63c08.fd6ac",
                "cb021d69.5c033"
            ]
        ]
    },
    {
        "id": "cfa63c08.fd6ac",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from flow_raw",
        "links": [
            "1b71d43.861ce2c"
        ],
        "x": 425,
        "y": 180,
        "wires": []
    },
    {
        "id": "27b97d49.28b222",
        "type": "mqtt in",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "root/adc/flow_raw",
        "qos": "0",
        "datatype": "auto",
        "broker": "913f80b.7920f8",
        "x": 100,
        "y": 180,
        "wires": [
            [
                "4c37356d.e703bc"
            ]
        ]
    },
    {
        "id": "e8907601.35f608",
        "type": "function",
        "z": "dea9ee4a.091b4",
        "name": "parseFloat",
        "func": "var text = msg.payload;\nmsg.payload = parseFloat(text);\nmsg.topic = \"pres_raw\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 220,
        "wires": [
            [
                "6fcced42.5b3654",
                "cb021d69.5c033"
            ]
        ]
    },
    {
        "id": "6fcced42.5b3654",
        "type": "link out",
        "z": "dea9ee4a.091b4",
        "name": "from pres_raw",
        "links": [
            "2eb8ee22.6c1052"
        ],
        "x": 425,
        "y": 220,
        "wires": []
    },
    {
        "id": "f04dfaee.31f638",
        "type": "mqtt in",
        "z": "dea9ee4a.091b4",
        "name": "",
        "topic": "root/adc/pres_raw",
        "qos": "0",
        "datatype": "auto",
        "broker": "913f80b.7920f8",
        "x": 110,
        "y": 220,
        "wires": [
            [
                "e8907601.35f608"
            ]
        ]
    }
]